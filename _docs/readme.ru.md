## Документация для CIDRAM (Русский)

### Содержание
- 1. [ПРЕДИСЛОВИЕ](#SECTION1)
- 2. [ИНСТАЛЛЯЦИЯ](#SECTION2)
- 3. [ИСПОЛЬЗОВАНИЕ](#SECTION3)
- 4. [УПРАВЛЕНИЕ ФРОНТЕНД](#SECTION4)
- 5. [СОДЕРЖАНИЕ ПАКЕТА ФАЙЛОВ](#SECTION5)
- 6. [НАСТРОЙКИ](#SECTION6)
- 7. [СИГНАТУР ФОРМАТ](#SECTION7)
- 8. [ИЗВЕСТНЫЕ ПРОБЛЕМЫ СОВМЕСТИМОСТИ](#SECTION8)
- 9. [ЧАСТО ЗАДАВАЕМЫЕ ВОПРОСЫ (FAQ)](#SECTION9)
- 10. *Зарезервировано для будущих дополнений к документации.*
- 11. [ЛЕГАЛЬНАЯ ИНФОРМАЦИЯ](#SECTION11)

*Примечание по поводу переводов: В случае ошибок (например, расхождения между переводами, опечаток, и т.д.), Английская версия README считается оригиналом и официальной версией. Если Вы обнаружите какие-либо ошибки, ваша помощь в исправлении их будет приветствоваться.*

---


### 1. <a name="SECTION1"></a>ПРЕДИСЛОВИЕ

CIDRAM/СИДРАМ (Бесклассовая Адресация Доступа Менеджер / Classless Inter-Domain Routing Access Manager) это скрипт предназначен для защиты веб-сайтов, путем блокирования запросов, исходящих из IP-адресов рассматривается как источников нежелательного трафика, в том числе (но не ограничивается) трафик с конечными точками доступа нечеловеческих, клоуд/облачные сервисы, спамботы, скребки, и т.д. Она делает это путем вычисления возможной CIDR из IP-адресов, поставляется из входящих запросов, а затем попытка сопоставить эти возможные CIDR с его сигнатур файлы (эти сигнатур файлы содержат списки CIDR из IP-адресов рассматривается как источников нежелательного трафика); Если совпадения найдены, запросы блокируются.

*(Видеть: [Что такое «CIDR»?](#WHAT_IS_A_CIDR)).*

CIDRAM Авторское право 2016 года, а также GNU/GPLv2 by Caleb M (Maikuolan).

Это руководство находится в свободном доступе. Вы можете его передавать и/или модифицировать на условиях GNU General Public License, как публикует Фонд свободного программного обеспечения (Free Software Foundation); либо под второй версией лицензии, либо любой другой более поздней версией (по вашему выбору). Пособие публикуется не в целях увеличения прибыли или создания себе рекламы, а лишь в надежде принести пользу, правда, без всякой гарантии. Подробности Вы можете узнать на странице GNU General Public License в разделе `LICENSE.txt`, а также на страницах:
- <http://www.gnu.org/licenses/>.
- <http://opensource.org/licenses/>.

Этот документ с относящимися к нему пакетом файлов можно бесплатно скачать на страницах [GitHub](https://cidram.github.io/).

---


### 2. <a name="SECTION2"></a>ИНСТАЛЛЯЦИЯ

#### 2.0 ИНСТАЛЛЯЦИЯ ВРУЧНУЮ

1) Скачайте архив на свой компьютер и откройте его. На хост-компьютере или в системе управления содержимым (CMS) создайте регистр, куда Вы хотите загрузить содержимое этого пакета. Такой регистр, как `/public_html/cidram/`, будет вполне достаточным, пока он отвечает вашим требованиям к защите или личным предпочтениям.

2) Переименовать `config.ini.RenameMe` в `config.ini` (расположенный внутри `vault`), и если Вы хотите (рекомендуются для опытных пользователей, имеющих соответствующие знания), открой это (этот файл содержит все параметры конфигурации для CIDRAM; краткие комментарии описывают задачи каждой параметры). Измените величины в соответствии с Вашими потребностями. Сохраните файл и закройте.

3) Скачайте всё содержимое (CIDRAM и файлы) в указанный в пункте 1 регистр, кроме файлов `*.txt`/`*.md`.

4) Право доступа `vault`-регистра поменяйте на «755» (если есть проблемы, Вы можете попробовать „777“; это менее безопасно, хотя). Права доступа вышестоящего папка, в котором находится содержание (папка в который Вы наметили занести файлы) могут остаться прежними, но всё же лучше проверить доступ, если случились проблемы с доступом (обычно должно быть „755“ в стандарта). Вкратце: Чтобы пакет работал правильно, PHP должен иметь возможность читать и писать файлы в каталоге `vault`. Многие вещи (обновление, ведение журнала, и т.д.) не будут возможны, если PHP не может писать в каталог `vault`, и пакет не будет работать вообще, если PHP не может читать из каталога `vault`. Однако для обеспечения оптимальной безопасности каталог `vault` НЕ должен быть общедоступным (конфиденциальная информация, такая как информация, содержащаяся в файле `config.ini` или `frontend.dat`, может быть обнаружена потенциальными злоумышленниками, если каталог `vault` является общедоступным).

5) Скрепите CIDRAM с Вашей системой или с системой управления содержимым (CMS). Для этого есть много способов. Самым простым является способ, когда CIDRAM-руководство является началом главного файла, который будет загружаться всякий раз, когда будут заходить на ваш интернет-сайт. Этот файл нужно связать с Вашей системой или с системой управления содержимым (CMS) при помощи `require` или `include` команд. Обычно такой файл обозначается в регистре как `/includes`, `/assets` или `/functions`, и часто называется `init.php`, `common_functions.php`, `functions.php`. Вы должны найти тот файл, который соответствует Вашим требованиям. Если это трудно для Вас, то посетите страница вопросов CIDRAM на GitHub. Возможно я или кто-то другой уже имеет опыт работы с CMS, которую используете вы, и сможет дать Вам совет (обязательно сообщите, какой CMS Вы пользуетесь). Введите прямо в начало этого файла следующий код:

`<?php require '/user_name/public_html/cidram/loader.php'; ?>`

Строку между кавычками замените локальным путём файла в формате `loader.php`, без HTTP-адреса (подобно пути для `vault`-регистра). Сохраните файл и закройте его; Загрузите его заново.

-- АЛЬТЕРНАТИВА --

Если у Вас Apache HTTP-сервер и доступ к нему в формате `php.ini` или похожем формате, Вы можете воспользоваться `auto_prepend_file`-директивой, установя приоритет CIDRAM, когда последует PHP-запрос. Примерно так:

`auto_prepend_file = "/user_name/public_html/cidram/loader.php"`

Или в `.htaccess` файлом:

`php_value auto_prepend_file "/user_name/public_html/cidram/loader.php"`

6) На этом инсталляционный процесс заканчивается. :-)

#### 2.1 ИНСТАЛЛЯЦИЯ С ПОМОЩЬЮ COMPOSER

[CIDRAM зарегистрирован в Packagist](https://packagist.org/packages/cidram/cidram), и так, если Вы знакомы с Composer, Вы можете использовать Composer для инсталляция CIDRAM (Вам все равно нужно будет подготовить конфигурацию и крючки; См. „инсталляция вручную“, шаги 2 и 5).

`composer require cidram/cidram`

#### 2.2 ИНСТАЛЛЯЦИЯ ДЛЯ WORDPRESS

Если Вы хотите использовать CIDRAM с WordPress, Вы можете проигнорировать все вышеприведенные инструкции. [CIDRAM зарегистрирован как плагин с базой данных плагинов WordPress](https://wordpress.org/plugins/cidram/), и Вы можете установить CIDRAM непосредственно из панели плагинов. Вы можете установить его так же, как любой другой плагин, и никаких дополнительных шагов не требуется. Подобно другим методам установки, Вы можете настроить свою инсталляция, изменив содержимое файла `config.ini`, или с помощью конфигурация страница в фронтенд. Если Вы активировать CIDRAM фронтенд и обновить CIDRAM используя обновления страница в фронтенд, это автоматически синхронизируется с информацией о версии плагина, отображаемой в панели инструментов плагинов.

*Предупреждение: Обновление CIDRAM через панель инструментов плагинов приводит к чистой установке! Если Вы персонализированные свою инсталляция (изменили вашу конфигурацию, установленные модули и т.д.), эти персонализации будут потеряны при обновлении через панель инструментов плагинов! Лог-файлы также будут потеряны! Чтобы сохранить файлы журналов и настройки, обновите страницу с CIDRAM фронтенд.*

---


### 3. <a name="SECTION3"></a>ИСПОЛЬЗОВАНИЕ

CIDRAM должен автоматически блокировать нежелательные запросы на свой веб-сайт, без необходимости ручного помощь, кроме его первоначальной инсталляция.

Вы можете настроить конфигурацию, и настроить какие CIDRs заблокированы, путем изменения файла конфигурации и/или ваши сигнатур файлы.

Если Вы обнаружили ложноположительный, пожалуйста, свяжитесь со мной чтобы сообщить мне об этом. *(Видеть: [Что такое „ложноположительный“?](#WHAT_IS_A_FALSE_POSITIVE)).*

CIDRAM можно обновлять вручную или через фронтенд. CIDRAM также может быть обновлен через Composer или WordPress, если они первоначально установлены с помощью этих средств.

---


### 4. <a name="SECTION4"></a>УПРАВЛЕНИЕ ФРОНТЕНД

#### 4.0 ЧТО ЯВЛЯЕТСЯ ФРОНТЕНД.

Фронтенд обеспечивает удобный и простой способ для поддержания, управления и обновить инсталляция CIDRAM. Вы можете просматривать, обмениваться и скачать лог-файлы через страницу для лог-файлы, Вы можете изменить конфигурацию с помощью страницы конфигурации, Вы можете устанавливать и удалять компоненты через страницу обновления, и Вы можете загрузить, скачать, и изменять файлы в вашем vault с помощью файл менеджер.

Фронтенд по умолчанию отключена в целях предотвращения несанкционированного доступа (несанкционированного доступа может иметь серьезные последствия для вашего веб-сайта и его безопасности). Инструкции по включению его включены ниже этого пункта.

#### 4.1 КАК ВКЛЮЧИТЬ ФРОНТЕНД.

1) Найдите директиву `disable_frontend` внутри `config.ini`, и установить его на `false` (это будет `true` по умолчанию).

2) Перейти на `loader.php` из вашего браузера (например, `http://localhost/cidram/loader.php`).

3) Войти с именем пользователя и паролем по умолчанию (admin/password).

Заметка: После того, как Вы вошли в первый раз, в целях предотвращения несанкционированного доступа к фронтенд, Вы должны немедленно изменить имя пользователя и пароль! Это очень важно, потому что это можно загрузить произвольный PHP код на свой веб-сайт через фронтенд.

Кроме того, для обеспечения оптимальной безопасности настоятельно рекомендуется включить «двухфакторную аутентификацию» для всех учетных записей фронтенд (инструкции приведены ниже).

#### 4.2 КАК ИСПОЛЬЗОВАТЬ ФРОНТЕНД.

Инструкции предоставляются на каждой странице в фронтенд, чтобы объяснить правильный способ использовать его и его целевое назначение. Если Вам нужна дополнительная объяснение или любой специальный помощь, обратитесь в поддержки. Дополнительно, есть некоторые видео доступны на YouTube, которые могли бы помочь путем демонстрации.

#### 4.3 ДВУХФАКТОРНАЯ АУТЕНТИФИКАЦИЯ

Возможно сделать фронтенд более безопасным, включив двухфакторную аутентификацию («2FA»). При входе в учетную запись с поддержкой 2FA, электронное письмо отправляется на адрес электронной почты, связанный с этой учетной записью. Это электронное письмо содержит «код 2FA», который затем должен ввести пользователь в дополнение к имени пользователя и паролю, чтобы иметь возможность войти в систему, используя эту учетную запись. Это означает, что получить пароль учетной записи будет недостаточно для того, чтобы любой хакер или потенциальный злоумышленник могли войти в эту учетную запись, потому что им также необходимо будет иметь доступ к адресу электронной почты, связанному с этой учетной записью, чтобы иметь возможность получать и использовать код 2FA, связанный с сеансом, что делает фронтенд более безопасным.

Во-первых, чтобы включить двухфакторную аутентификацию, используя страницу обновлений фронтенда, установите компонент PHPMailer. CIDRAM использует PHPMailer для отправки электронных писем. Следует отметить, что хотя CIDRAM, сам по себе, совместим с PHP >= 5.4.0, PHPMailer требует PHP >= 5.5.0, поэтому означает, что включение двухфакторной аутентификации для фронтенда CIDRAM будет невозможно для пользователей PHP 5.4.

После того, как Вы установили PHPMailer, вам нужно будет заполнить директивы конфигурации для PHPMailer через страницу конфигурации CIDRAM или файл конфигурации. Более подробная информация об этих директивах конфигурации содержится в разделе конфигурации этого документа. После того, как Вы заполнили директивы конфигурации PHPMailer, установите `Enable2FA` в `true`. На этом этапе должна быть включена двухфакторная аутентификация.

Затем вам нужно связать адрес электронной почты с учетной записью, чтобы CIDRAM знал, куда отправлять коды 2FA при входе в эту учетную запись. Для этого используйте адрес электронной почты в качестве имени пользователя для учетной записи (например, `foo@bar.tld`), или указать адрес электронной почты как часть имени пользователя так же, как при отправке письма обычно (например, `Foo Bar <foo@bar.tld>`).

Заметка: Особенно важна защита вашего vault от несанкционированного доступа (например, посредством укрепления безопасности вашего сервера и ужесточение разрешений общего доступа), поскольку несанкционированный доступ к вашему конфигурационному файлу (который хранится в вашем vault), может подвергнуть риску выставлять исходящие настройки SMTP (это включает имя пользователя и пароль SMTP). Вы должны убедиться, что ваше vault правильно защищено, прежде чем включить двухфакторную аутентификацию. Если Вы не можете этого сделать, то, по крайней мере, Вы должны создать новую учетную запись электронной почты, предназначенную для этой цели, чтобы уменьшить риски, связанные с открытыми параметрами SMTP.

---


### 5. <a name="SECTION5"></a>СОДЕРЖАНИЕ ПАКЕТА ФАЙЛОВ

Следующая таблица содержит все файлы, содержащиеся в скаченном архиве руководства, а также файлы, которые можно создать, используя данное руководство, с кратким описанием этих файлов.

Файл | Описание
----|----
/_docs/ | Регистр с документами (содержит различные файлы).
/_docs/readme.ar.md | Документация на Арабском языке.
/_docs/readme.de.md | Документация на Немецком языке.
/_docs/readme.en.md | Документация на Английском языке.
/_docs/readme.es.md | Документация на Испанском языке.
/_docs/readme.fr.md | Документация на Французском языке.
/_docs/readme.id.md | Документация на Индонезийском языке.
/_docs/readme.it.md | Документация на Итальянском языке.
/_docs/readme.ja.md | Документация на Японском языке.
/_docs/readme.ko.md | Документация на Корейском языке.
/_docs/readme.nl.md | Документация на Нидерланском языке.
/_docs/readme.pt.md | Документация на Португальском языке.
/_docs/readme.ru.md | Документация на Русском языке.
/_docs/readme.ur.md | Документация на Урду языке.
/_docs/readme.vi.md | Документация на Вьетнамском язык.
/_docs/readme.zh-TW.md | Документация на Китайском традиционный.
/_docs/readme.zh.md | Документация на Китайском упрощенный.
/vault/ | Vault-регистр (содержит различные файлы).
/vault/fe_assets/ | Данные для фронтенд.
/vault/fe_assets/.htaccess | Гипертекст доступа файл (в этом случае защищает от неавторизованного доступа чувствительные файлы данного руководства).
/vault/fe_assets/_2fa.html | Шаблон HTML, используемый при запросе пользователя для кода 2FA.
/vault/fe_assets/_accounts.html | Шаблон HTML для учетными записями страница в фронтенд.
/vault/fe_assets/_accounts_row.html | Шаблон HTML для учетными записями страница в фронтенд.
/vault/fe_assets/_aux.html | Шаблон HTML для страница вспомогательных правил в фронтенд.
/vault/fe_assets/_cache.html | Шаблон HTML для данные кэша страница в фронтенд.
/vault/fe_assets/_cidr_calc.html | Шаблон HTML для калькулятор CIDR.
/vault/fe_assets/_cidr_calc_row.html | Шаблон HTML для калькулятор CIDR.
/vault/fe_assets/_config.html | Шаблон HTML для конфигурация страница в фронтенд.
/vault/fe_assets/_config_row.html | Шаблон HTML для конфигурация страница в фронтенд.
/vault/fe_assets/_files.html | Шаблон HTML для файл менеджер.
/vault/fe_assets/_files_edit.html | Шаблон HTML для файл менеджер.
/vault/fe_assets/_files_rename.html | Шаблон HTML для файл менеджер.
/vault/fe_assets/_files_row.html | Шаблон HTML для файл менеджер.
/vault/fe_assets/_home.html | Шаблон HTML для домашняя страница в фронтенд.
/vault/fe_assets/_ip_aggregator.html | Шаблон HTML для агрегатора IP.
/vault/fe_assets/_ip_test.html | Шаблон HTML для страница тест IP.
/vault/fe_assets/_ip_test_row.html | Шаблон HTML для страница тест IP.
/vault/fe_assets/_ip_tracking.html | Шаблон HTML для страница отслеживания IP.
/vault/fe_assets/_ip_tracking_row.html | Шаблон HTML для страница отслеживания IP.
/vault/fe_assets/_login.html | Шаблон HTML для войти страница в фронтенд.
/vault/fe_assets/_logs.html | Шаблон HTML для лог-файлы страница в фронтенд.
/vault/fe_assets/_nav_complete_access.html | Шаблон HTML для навигационные ссылки в фронтенд, для тех кто с полным доступом.
/vault/fe_assets/_nav_logs_access_only.html | Шаблон HTML для навигационные ссылки в фронтенд, для тех кто с доступом только к лог-файлы.
/vault/fe_assets/_range.html | Шаблон HTML для таблицы диапазонов в фронтенд.
/vault/fe_assets/_range_row.html | Шаблон HTML для таблицы диапазонов в фронтенд.
/vault/fe_assets/_sections.html | Шаблон HTML для списка секций.
/vault/fe_assets/_statistics.html | Шаблон HTML для страница статистики в фронтенд.
/vault/fe_assets/_updates.html | Шаблон HTML для обновления страница в фронтенд.
/vault/fe_assets/_updates_row.html | Шаблон HTML для обновления страница в фронтенд.
/vault/fe_assets/frontend.css | CSS стиль листов для фронтенд.
/vault/fe_assets/frontend.dat | База данных для фронтенд (содержит информации об учетными записями, сессий, и кэш; генерируется только если фронтенд будет активирована и используется).
/vault/fe_assets/frontend.dat.safety | При необходимости генерируется в целях безопасности.
/vault/fe_assets/frontend.html | Основной файл шаблона HTML для фронтенд.
/vault/fe_assets/icons.php | Обработчик иконки (файл менеджер фронтенд использует его).
/vault/fe_assets/pips.php | Обработчик пипсов (файл менеджер фронтенд использует его).
/vault/fe_assets/scripts.js | Содержит фронтенд данные JavaScript.
/vault/lang/ | Содержит CIDRAM файлы на разных языках.
/vault/lang/.htaccess | Гипертекст доступа файл (в этом случае защищает от неавторизованного доступа чувствительные файлы данного руководства).
/vault/lang/lang.ar.cli.php | Арабском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.ar.fe.php | Арабском языковые файлы для фронтенд.
/vault/lang/lang.ar.php | Арабском языковые файлы.
/vault/lang/lang.bn.cli.php | Бенгальском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.bn.fe.php | Бенгальском языковые файлы для фронтенд.
/vault/lang/lang.bn.php | Бенгальском языковые файлы.
/vault/lang/lang.de.cli.php | Немецком языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.de.fe.php | Немецком языковые файлы для фронтенд.
/vault/lang/lang.de.php | Немецком языковые файлы.
/vault/lang/lang.en.cli.php | Английском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.en.fe.php | Английском языковые файлы для фронтенд.
/vault/lang/lang.en.php | Английском языковые файлы.
/vault/lang/lang.es.cli.php | Испанском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.es.fe.php | Испанском языковые файлы для фронтенд.
/vault/lang/lang.es.php | Испанском языковые файлы.
/vault/lang/lang.fr.cli.php | Французском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.fr.fe.php | Французском языковые файлы для фронтенд.
/vault/lang/lang.fr.php | Французском языковые файлы.
/vault/lang/lang.hi.cli.php | Хинди языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.hi.fe.php | Хинди языковые файлы для фронтенд.
/vault/lang/lang.hi.php | Хинди языковые файлы.
/vault/lang/lang.id.cli.php | Индонезийском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.id.fe.php | Индонезийском языковые файлы для фронтенд.
/vault/lang/lang.id.php | Индонезийском языковые файлы.
/vault/lang/lang.it.cli.php | Итальянском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.it.fe.php | Итальянском языковые файлы для фронтенд.
/vault/lang/lang.it.php | Итальянском языковые файлы.
/vault/lang/lang.ja.cli.php | Японском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.ja.fe.php | Японском языковые файлы для фронтенд.
/vault/lang/lang.ja.php | Японском языковые файлы.
/vault/lang/lang.ko.cli.php | Корейском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.ko.fe.php | Корейском языковые файлы для фронтенд.
/vault/lang/lang.ko.php | Корейском языковые файлы.
/vault/lang/lang.nl.cli.php | Нидерланском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.nl.fe.php | Нидерланском языковые файлы для фронтенд.
/vault/lang/lang.nl.php | Нидерланском языковые файлы.
/vault/lang/lang.no.cli.php | Норвежском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.no.fe.php | Норвежском языковые файлы для фронтенд.
/vault/lang/lang.no.php | Норвежском языковые файлы.
/vault/lang/lang.pt.cli.php | Португальском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.pt.fe.php | Португальском языковые файлы для фронтенд.
/vault/lang/lang.pt.php | Португальском языковые файлы.
/vault/lang/lang.ru.cli.php | Русском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.ru.fe.php | Русском языковые файлы для фронтенд.
/vault/lang/lang.ru.php | Русском языковые файлы.
/vault/lang/lang.sv.cli.php | Шведском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.sv.fe.php | Шведском языковые файлы для фронтенд.
/vault/lang/lang.sv.php | Шведском языковые файлы.
/vault/lang/lang.th.cli.php | Тайском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.th.fe.php | Тайском языковые файлы для фронтенд.
/vault/lang/lang.th.php | Тайском языковые файлы.
/vault/lang/lang.tr.cli.php | Турецком языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.tr.fe.php | Турецком языковые файлы для фронтенд.
/vault/lang/lang.tr.php | Турецком языковые файлы.
/vault/lang/lang.ur.cli.php | Урду языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.ur.fe.php | Урду языковые файлы для фронтенд.
/vault/lang/lang.ur.php | Урду языковые файлы.
/vault/lang/lang.vi.cli.php | Вьетнамском языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.vi.fe.php | Вьетнамском языковые файлы для фронтенд.
/vault/lang/lang.vi.php | Вьетнамском языковые файлы.
/vault/lang/lang.zh-tw.cli.php | Китайском традиционный языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.zh-tw.fe.php | Китайском традиционный языковые файлы для фронтенд.
/vault/lang/lang.zh-tw.php | Китайском традиционный языковые файлы.
/vault/lang/lang.zh.cli.php | Китайском упрощенный языковые файлы для CLI (Способ Командных Строк).
/vault/lang/lang.zh.fe.php | Китайском упрощенный языковые файлы для фронтенд.
/vault/lang/lang.zh.php | Китайском упрощенный языковые файлы.
/vault/.htaccess | Гипертекст доступа файл (в этом случае защищает от неавторизованного доступа чувствительные файлы данного руководства).
/vault/.travis.php | Используется Travis CI для тестирования (на эффективность данного руководства не влияет).
/vault/.travis.yml | Используется Travis CI для тестирования (на эффективность данного руководства не влияет).
/vault/aggregator.php | Агрегатор IP.
/vault/auxiliary.yaml | Содержит вспомогательные правила. Не входит в комплект поставки. Сгенерировано страницей вспомогательных правил.
/vault/cache.dat | Cache-данные.
/vault/cache.dat.safety | При необходимости генерируется в целях безопасности.
/vault/cidramblocklists.dat | Файл метаданных для необязательных блоклистов из Macmathan; Используется на фронтенд обновления страница.
/vault/cli.php | Обработчик CLI (Способ Командных Строк).
/vault/components.dat | Файл метаданных компонентов; Используется на фронтенд обновления страница.
/vault/config.ini.RenameMe | Файл с конфигурации. Содержит всевозможные конфигурации CIDRAM (переименовать чтобы активировать).
/vault/config.php | Обработчик конфигурации.
/vault/config.yaml | Файл с умолчанию конфигурации; Содержит значения по умолчанию для конфигурации CIDRAM.
/vault/frontend.php | Обработчик фронтенд.
/vault/frontend_functions.php | Функции файла фронтенд.
/vault/functions.php | Функции файла (обязательно).
/vault/hashes.dat | Содержит список принятых хэшей (связана с функция reCAPTCHA; генерируется только если функция reCAPTCHA активирована).
/vault/ignore.dat | Игнорируется файл (используется для указания сигнатур секций CIDRAM следует игнорировать).
/vault/ipbypass.dat | Содержит список IP байпасов (связана с функция reCAPTCHA; генерируется только если функция reCAPTCHA активирована).
/vault/ipv4.dat | IPv4 файла сигнатур (нежелательные облачные сервисы и нечеловеческие конечные точки).
/vault/ipv4_bogons.dat | IPv4 файла сигнатур (bogon/марсианин CIDRs).
/vault/ipv4_custom.dat.RenameMe | IPv4 пользовательские сигнатур файлы (переименовать чтобы активировать).
/vault/ipv4_isps.dat | IPv4 файла сигнатур (опасно и спам-склонным интернет-провайдеры).
/vault/ipv4_other.dat | IPv4 файла сигнатур (CIDRs для прокси-серверов, виртуальных частных сетей и различных других нежелательных услуг).
/vault/ipv6.dat | IPv6 файла сигнатур (нежелательные облачные сервисы и нечеловеческие конечные точки).
/vault/ipv6_bogons.dat | IPv6 файла сигнатур (bogon/марсианин CIDRs).
/vault/ipv6_custom.dat.RenameMe | IPv6 пользовательские сигнатур файлы (переименовать чтобы активировать).
/vault/ipv6_isps.dat | IPv6 файла сигнатур (опасно и спам-склонным интернет-провайдеры).
/vault/ipv6_other.dat | IPv6 файла сигнатур (CIDRs для прокси-серверов, виртуальных частных сетей и различных других нежелательных услуг).
/vault/lang.php | Язык обработчика.
/vault/modules.dat | Файл метаданных модулей; Используется на фронтенд обновления страница.
/vault/outgen.php | Выход генератора.
/vault/php5.4.x.php | Полифилл для PHP 5.4.X (требуется для PHP 5.4.X обратная совместимость; безопасно для удаления для новых версий PHP).
/vault/recaptcha.php | Модуль reCAPTCHA.
/vault/rules_as6939.php | Пользовательские правила файл для AS6939.
/vault/rules_softlayer.php | Пользовательские правила файл для Soft Layer.
/vault/rules_specific.php | Пользовательские правила файл для некоторые специфические CIDRs.
/vault/salt.dat | Соль файл (используется некоторыми периферического функциональностью; генерируется только при необходимости).
/vault/template_custom.html | Шаблонный файл. Шаблон для HTML-формата сообщений, сообщающий о том, что загрузка файла была заблокирована CIDRAM (сообщение, которое будет показано пользователю).
/vault/template_default.html | Шаблонный файл. Шаблон для HTML-формата сообщений, сообщающий о том, что загрузка файла была заблокирована CIDRAM (сообщение, которое будет показано пользователю).
/vault/themes.dat | Файл метаданных тем; Используется на фронтенд обновления страница.
/vault/verification.yaml | Данные проверки для поисковых систем и социальных сетей.
/.gitattributes | Файл из GitHub проекта (на эффективность данного руководства не влияет).
/Changelog.txt | Перечень внесённых в руководство изменений и его различные версии (на эффективность данного руководства не влияет).
/composer.json | Composer/Packagist информация (на эффективность данного руководства не влияет).
/CONTRIBUTING.md | Информация о том как внести свой вклад в проект.
/LICENSE.txt | Копия лицензии GNU/GPLv2 (на эффективность данного руководства не влияет).
/loader.php | Загрузчик. Этот файл будет связан с Вашей системой управления содержимым (обязательно!).
/README.md | Резюме информации о проекте.
/web.config | Файл с ASP.NET-конфигурации. Этот файл необходим для защиты `/vault` регистров от неавторизованного доступа, когда руководство инсталлируется на один из серверов, базирующихся на ASP.NET-технологиях.

---


### 6. <a name="SECTION6"></a>НАСТРОЙКИ
Ниже представлен список переменных данных в файле конфигурации `config.ini`, а также краткое описание их функций.

#### «general» (Категория)
Генеральная конфигурация от CIDRAM.

##### «logfile»
- Файл разборчивыми для людей, для регистрации всех заблокированных попыток несанкционированного доступа. Задайте имя файлу, или оставьте пустым чтобы деактивировать опцию.

##### «logfileApache»
- Apache-стиль файл для регистрации всех заблокированных попыток несанкционированного доступа. Задайте имя файлу, или оставьте пустым чтобы деактивировать опцию.

##### «logfileSerialized»
- Сериализованная файл для регистрации всех заблокированных попыток несанкционированного доступа. Задайте имя файлу, или оставьте пустым чтобы деактивировать опцию.

*Полезный совет: Если Вы хотите, Вы можете добавить информацию о дате/времени к именам файлов журналов путем включения их во имя: `{yyyy}` для полный год, `{yy}` для сокращенный год, `{mm}` для месяц, `{dd}` для день, `{hh}` для час.*

*Примеры:*
- *`logfile='logfile.{yyyy}-{mm}-{dd}-{hh}.txt'`*
- *`logfileApache='access.{yyyy}-{mm}-{dd}-{hh}.txt'`*
- *`logfileSerialized='serial.{yyyy}-{mm}-{dd}-{hh}.txt'`*

##### «truncate»
- Усекать лог-файлы, когда они достигают определенного размера? Значение это максимальный размер в Б/КБ/МБ/ГБ/ТБ, до которого файл журнала может увеличиться до усечения. Стандартное значение 0КБ отключает усечение (лог-файлы может расти неограниченно). Примечание: относится к отдельным лог-файлы! Размер файлов журнала не учитывается совместно.

##### «log_rotation_limit»
- Лог вращения ограничивает количество журнальных лог-файлов, которые должны существовать в любой момент времени. Когда создаются новые лог-файлы, если общее количество лог-файлов превышает указанный предел, указанное действие будет выполнено. Здесь Вы можете указать желаемый лимит. Значение 0 отключит вращение лог.

##### «log_rotation_action»
- Лог вращения ограничивает количество журнальных лог-файлов, которые должны существовать в любой момент времени. Когда создаются новые лог-файлы, если общее количество лог-файлов превышает указанный предел, указанное действие будет выполнено. Здесь Вы можете указать желаемое действие. Delete = Удалите самые старые лог-файлы, пока лимит больше не будет превышен. Archive = Сначала архивируйте, а затем удалите самые старые лог-файлы, пока лимит больше не будет превышен.

*Техническое разъяснение: В этом контексте, «самые старые» означает наименее недавно измененный.*

##### «timeOffset»
- Если ваш сервер времени не соответствует вашему местному времени, Вы можете указать смещение здесь для корректировки информации о дате/времени генерируется от CIDRAM в соответствии с вашими потребностями. Обычно рекомендуется вместо того, чтобы настроить директиву о зоне времени в файле `php.ini`, но иногда (например, при работе с общими хостинг-провайдеров, которые ограничены) это не всегда возможно, и так, эта опция представлена здесь. Смещение описывается как минут.
- Пример (добавить один час): `timeOffset=60`

##### «timeFormat»
- Формат нотации даты, используемый CIDRAM. Стандарт = `{Day}, {dd} {Mon} {yyyy} {hh}:{ii}:{ss} {tz}`.

##### «ipaddr»
- Место IP-адреса актуального соединения в общем потоке данных (полезно для Cloud-сервиса). Стандарт = REMOTE_ADDR. ВНИМАНИЕ: Изменяйте это значение только в том случае, если Вы уверены в своих действиях!

Рекомендуемые значения для «ipaddr»:

Значения | Контекст
---|---
`HTTP_INCAP_CLIENT_IP` | Incapsula обратный прокси-сервер.
`HTTP_CF_CONNECTING_IP` | Cloudflare обратный прокси-сервер.
`CF-Connecting-IP` | Cloudflare обратный прокси-сервер (альтернатива; если вышеуказанное не работает).
`HTTP_X_FORWARDED_FOR` | Cloudbric обратный прокси-сервер.
`X-Forwarded-For` | [Squid обратный прокси-сервер](http://www.squid-cache.org/Doc/config/forwarded_for/).
*Определяется конфигурацией сервера.* | [Nginx обратный прокси-сервер](https://www.nginx.com/resources/admin-guide/reverse-proxy/).
`REMOTE_ADDR` | Не обратный прокси-сервер (стандартное значение).

##### «forbid_on_block»
- Какое сообщение статуса HTTP должно отправлять CIDRAM при блокировке запросов?

Поддерживаемые значения:

Код состояния | Сообщение состояния | Описание
---|---|---
`200` | `200 OK` | Значение по умолчанию. Наименее могущественный, но наиболее дружелюбный к пользователям.
`403` | `403 Forbidden` | Более могущественный, но менее дружелюбный к пользователям.
`410` | `410 Gone` | Может возникнуть проблема при попытке разрешить ложноположительный, из-за чего некоторые браузеры будут кэшировать это сообщение статуса и не отправлять последующие запросы даже после разблокирования пользователей. Может быть более полезным, чем другие варианты, для сокращения запросов от определенных, очень конкретных типов ботов.
`418` | `418 I'm a teapot` | Фактически ссылается на шутки апрельских дураков [[RFC 2324](https://tools.ietf.org/html/rfc2324#section-6.5.14)] и вряд ли будет понятна клиенту. Предоставляется для развлечения и удобства, но не рекомендуется.
`451` | `Unavailable For Legal Reasons` | Подходит для контекстов, когда запросы блокируются в основном по юридическим причинам. Не рекомендуется в других контекстах.
`503` | `Service Unavailable` | Наиболее могущественный, но наименее дружелюбный к пользователям.

##### «silent_mode»
- Должен CIDRAM молча перенаправить заблокированные попытки доступа вместо отображения страницы «Доступ Закрыт»? Если да, указать местоположение для перенаправления блокировал попытки доступа. Если нет, оставить эту переменную пустым.

##### «lang»
- Задаёт CIDRAM стандарт языка.

##### «numbers»
- Указывает, как отображать числа.

Поддерживаемые значения:

Значение | Производит | Описание
---|---|---
`NoSep-1` | `1234567.89`
`NoSep-2` | `1234567,89`
`Latin-1` | `1,234,567.89` | Значение по умолчанию.
`Latin-2` | `1 234 567.89`
`Latin-3` | `1.234.567,89`
`Latin-4` | `1 234 567,89`
`Latin-5` | `1,234,567·89`
`China-1` | `123,4567.89`
`India-1` | `12,34,567.89`
`India-2` | `१२,३४,५६७.८९`
`Bengali-1` | `১২,৩৪,৫৬৭.৮৯`
`Arabic-1` | `١٢٣٤٥٦٧٫٨٩`
`Arabic-2` | `١٬٢٣٤٬٥٦٧٫٨٩`
`Thai-1` | `๑,๒๓๔,๕๖๗.๘๙`

*Заметка: Эти значения нигде не стандартизируются и, вероятно, не будут иметь значения за пределами пакета. Кроме того, поддерживаемые значения могут измениться в будущем.*

##### «emailaddr»
- Если Вы хотите, Вы можете предоставить адрес электронной почты здесь чтобы дать пользователям, когда они заблокированы, для их использования в качестве точки контакта за поддержку и/или помощь ибо в случае их блокирования по ошибке. ПРЕДУПРЕЖДЕНИЕ: Любой адрес электронной почты Вы предоставляете здесь наверняка будет найдены по спамботами и скребки во время используется здесь, и так, это настоятельно рекомендуется, если Вы решите добавить адрес электронной почты здесь, что Вы убедитесь что адрес электронной почты что Вы предоставляете здесь одноразовый адрес и/или адрес который Вы не против чтобы быть спамом (другими словами, Вы вероятно не хотите использовать ваши основные личные электронной почты или первичные бизнес электронной почты).

##### «emailaddr_display_style»
- Как Вы предпочитаете, чтобы адрес электронной почты был представлен пользователям? «default» = Ссылки кликабельны. «noclick» = Текст не кликабельны.

##### «disable_cli»
- Деактивировать ли CLI-модус? Обычно CLI-модус активирован. Однако иногда он может отрицательно влиять на определённые тестовые программы (например на PHPUnit) и другие приложения, базирующиеся на CLI. Если CLI-модус нельзя деактивировать, то эту команду нужно игнорировать. False = CLI-модус активирован [Стандарт]; True = CLI-модус деактивирован.

##### «disable_frontend»
- Деактивировать доступ к фронтенд? Доступ к фронтенд может сделать CIDRAM более управляемым, но также может быть потенциальный риск безопасности. Рекомендуется чтобы управлять CIDRAM через бэкенд когда возможно, но доступ к фронтенд предоставлен для того когда это не возможно. Держите его деактивирована за исключением того если Вам это нужно. False = Активировать доступ к фронтенд; True = Деактивировать доступ к фронтенд [Стандарт].

##### «max_login_attempts»
- Максимальное количество попыток входа в систему (фронтенд). Стандарт = 5.

##### «FrontEndLog»
- Файл для запись всех попыток входа в фронтенд. Задайте имя файлу, или оставьте пустым чтобы деактивировать опцию.

##### «ban_override»
- Переопределить «forbid_on_block» когда «infraction_limit» превысило? Когда переопределении: Блокированные запросы возвращают пустую страницу (файлы шаблонов не используются). 200 = Не переопределить [Стандарт]. Другие значения совпадают с доступными значениями для «forbid_on_block».

##### «log_banned_ips»
- Включить заблокированные запросы от запрещенных IP-адресов в лог-файлы? True = Да [Стандарт]; False = Нет.

##### «default_dns»
- Разделенный запятыми список DNS-серверов, чтобы использовать для имен хостов поиска. Стандарт = «8.8.8.8,8.8.4.4» (Google DNS). ВНИМАНИЕ: Изменяйте это значение только в том случае, если Вы уверены в своих действиях!

*Смотрите также: [Что я могу использовать для «default_dns»?](#WHAT_CAN_I_USE_FOR_DEFAULT_DNS)*

##### «search_engine_verification»
- Попытка проверить запросы от поисковых систем? Верификация поисковых систем гарантирует, что они не будут запрещены в результате превышения предела нарушение (запрет на поисковые системы с вашего сайта, как правило, оказывают негативное влияние на вашей поисковой системы рейтинга, SEO, и т.д.). Когда проверяется, поисковые системы могут быть заблокированы, но не запрещено. Когда не проверяется, это возможно для них должны быть запрещены в результате превышения лимита нарушений. Дополнительно, верификация поисковых систем обеспечивает защиту от подделки запросов поисковой системы и вредоносные источники маскируются как поисковые системы (такие запросы будут заблокированы при проверке поисковой активируется). True = Активировать верификация поисковых систем [Стандарт]; False = Деактивировать верификация поисковых систем.

В настоящее время поддерживается:
- __[Google](https://support.google.com/webmasters/answer/80553?hl=en)__
- __[Bing](https://blogs.bing.com/webmaster/2012/08/31/how-to-verify-that-bingbot-is-bingbot)__
- __Yahoo__
- __[Baidu (百度)](https://help.baidu.com/question?prod_en=master&class=Baiduspider)__
- __Sogou (搜狗)__
- __Youdao (有道)__
- __[Applebot](https://discussions.apple.com/thread/7090135)__
- __[Yandex (Яндекс)](https://yandex.com/support/webmaster/robot-workings/check-yandex-robots.xml)__
- __[DuckDuckGo](https://duckduckgo.com/duckduckbot)__

Не совместимо (вызывает конфликты):
- __[Mix.com](https://github.com/CIDRAM/CIDRAM/issues/80)__

##### «social_media_verification»
- Попытка проверить запросы в социальных сетях? Проверка социальных сетей обеспечивает защиту от поддельных запросов в социальных сетях (такие запросы будут заблокированы). True = Активировать проверку социальных сетей [Стандарт]; False = Деактивировать проверку социальных сетей.

В настоящее время поддерживается:
- __[Pinterest](https://help.pinterest.com/en/articles/about-pinterest-crawler-0)__
- __Embedly__
- __[Grapeshot](https://www.grapeshot.com/crawler/)__
- __Twitterbot__

##### «protect_frontend»
- Определяет, будут ли средства защиты как правило предоставляемые CIDRAM должны быть применены к фронтенд. True = Да [Стандарт]; False = Нет.

##### «disable_webfonts»
- Отключить веб-шрифты? True = Да [Стандарт]; False = Нет.

##### «maintenance_mode»
- Включить режим обслуживания? True = Да; False = Нет [Стандарт]. Отключает все, кроме фронтенд. Иногда полезно при обновлении CMS, фреймворков и т.д.

##### «default_algo»
- Определяет, какой алгоритм использовать для всех будущих паролей и сеансов. Опции: PASSWORD_DEFAULT (стандарт), PASSWORD_BCRYPT, PASSWORD_ARGON2I (требует PHP >= 7.2.0).

##### «statistics»
- Отслеживать статистику использования CIDRAM? True = Да; False = Нет [Стандарт].

##### «force_hostname_lookup»
- Поиск имен хостов для всех запросов? True = Да; False = Нет [Стандарт]. Поиск имен хостов обычно выполняется по принципу «по мере необходимости», но может быть принудительно для всех запросов. Это может быть полезно в качестве средства предоставления более подробной информации в логфайлах, но может также иметь слегка отрицательный эффект на производительность.

##### «allow_gethostbyaddr_lookup»
- Разрешить поиск gethostbyaddr, когда UDP недоступен? True = Да [Стандарт]; False = Нет.
- *Примечание. Поиск IPv6 может работать некорректно на некоторых 32-разрядных системах.*

##### «hide_version»
- Скрыть информацию о версии из журналов и вывода на страницу? True = Да; False = Нет [Стандарт].

##### «empty_fields»
- Как CIDRAM обрабатывать пустые поля при регистрации и отображении информации о событии блока? «include» = Включить пустые поля. «omit» = Опустить пустые поля [стандарт].

#### «signatures» (Категория)
Конфигурация сигнатур.

##### «ipv4»
- Список сигнатур IPv4 файлы, которые CIDRAM должен попытаться обработать, разделенных запятыми. Вы можете добавлять записи здесь, если Вы хотите, чтобы включить дополнительные IPv4 сигнатур файлы в CIDRAM.

##### «ipv6»
- Список сигнатур IPv6 файлы, которые CIDRAM должен попытаться обработать, разделенных запятыми. Вы можете добавлять записи здесь, если Вы хотите, чтобы включить дополнительные IPv6 сигнатур файлы в CIDRAM.

##### «block_cloud»
- Блокировать CIDRs идентифицирован как принадлежащий услуг веб-хостинга / облачные сервисы? Если Вы управляете службы API с вашего сайта, или если Вы ожидать что другие веб-сайты чтобы подключиться к ваш веб-сайт, эта директива должна быть false. Если Вы этого не сделаете, эта директива должна быть true.

##### «block_bogons»
- Блокировать марсианин/bogon CIDRs? Если Вы ожидаете посетителей на свой веб-сайт из вашей локальной сети или из локальной сети, эта директива должна быть false. В противном случае, эта директива должна быть true.

##### «block_generic»
- Блокировать CIDRs рекомендуется для черных списков? Это охватывает любые сигнатур, которые не помечены как часть какой-либо из других более конкретных категорий сигнатур.

##### «block_legal»
- Блокировать CIDRs в ответ на юридические обязательства? Эта директива обычно не должна иметь никакого эффекта, поскольку CIDRAM не связывает CIDR с «юридическими обязательствами» по умолчанию, но тем не менее он существует как дополнительная контрольная мера в интересах любых пользовательских файлов сигнатуры или модулей, которые могут существовать по юридическим причинам.

##### «block_malware»
- Блокировать IP-адреса, связанные с вредоносным программы? Это включает в себя серверы C&C; зараженные машины; машины, участвующие в распространении вредоносных программ; и т.д.

##### «block_proxies»
- Блокировать CIDRs идентифицированы как принадлежащие к прокси-серверов или VPNs? Если Вам требуется, чтобы пользователи смогли получить доступ к вашему веб-сайт от прокси-серверов и VPNs, эта директива должна быть false. В противном случае, если Вам не нужны прокси-серверов или VPNs, эта директива должна быть true как средство повышения безопасности.

##### «block_spam»
- Блокировать CIDRs которые были определены как высокого риска для спама? Если Вы не испытываете проблем при этом, как правило, эта директива должна быть true.

##### «modules»
- Список модуль файлы для загрузки после обработки сигнатуры IPv4/IPv6, разделенных запятыми.

##### «default_tracktime»
- Сколько секунд чтобы отслеживать IP-адреса, запрещенные модулями. Стандарт = 604800 (1 неделя).

##### «infraction_limit»
- Максимальное число нарушений IP-разрешено брать на себя, прежде чем она запрещена отслеживание IP. Стандарт = 10.

##### «track_mode»
- Когда следует учитывать нарушения? False = Когда IP-адреса блокируются из модулями. True = Когда IP-адреса блокируются по какой-либо причине.

#### «recaptcha» (Категория)
Если Вы хотите, Вы можете предоставить пользователям способ обхода страницы «Доступ Закрыт» путем завершения инстанция reCAPTCHA. Это может помочь смягчить некоторые из рисков связанных с ложных-срабатываний в тех ситуациях когда мы не совсем уверены был ли запрос возник из машины или человека.

Из-за рисков связанные с обеспечением способ для конечных пользователей чтобы пропустить страницу «Доступ Закрыт», в общем, я бы посоветовал против включения этой функции если Вы чувствуете что это будет необходимо сделать так. Ситуации где это было бы необходимо: Если ваш сайт имеет клиентов/пользователям которые должны иметь доступ к вашему веб-сайт, и если это что-то что не может быть договорная, но если те клиентов/пользователям, случается, подключение от враждебной сети которые потенциально могли бы быть также проведение нежелательного трафика, и блокирование этого нежелательного трафика также не может быть договорная, в этих конкретных не-выигрышных ситуаций, функция reCAPTCHA может пригодиться как средство позволяет желаемых клиентов/пользователям, в то же время позволяет отказ от нежелательного трафика из той же самой сети. Тем не менее, учитывая что целевое назначение для CAPTCHA является различать людей и нелюдей, функция reCAPTCHA будет оказывать помощь только в этих не-выигрышных ситуаций если мы предположить что этот нежелательного трафика должен быть нелюдей (например, спамботы, скребки, хакерских утилит, автоматический трафик), в противоположность нежелательного трафика что должен быть людей (таких как человеческие спамеров, хакеры, и другие).

Чтобы получить «site key» и «secret key» (требуется для использования reCAPTCHA), перейдите по ссылкам: [https://developers.google.com/recaptcha/](https://developers.google.com/recaptcha/)

##### «usemode»
- Определяет как CIDRAM должны использовать reCAPTCHA.
- 0 = reCAPTCHA полностью отключена (стандарт).
- 1 = reCAPTCHA позволила для всех сигнатуры.
- 2 = reCAPTCHA позволила только для сигнатуры которые принадлежат к разделам специально обозначенных в reCAPTCHA-позволила в файлов сигнатур.
- (Любое другое значение будет обрабатываться таким же образом как 0).

##### «lockip»
- Определяет ли хэши должны быть привязаны к конкретным IP-адресов. False = Куки и хэши МОЖЕТ использоваться в нескольких IP-адресов (стандарт). True = Куки и хэши НЕ может использоваться в нескольких IP-адресов (куки/хэши привязаны к IP-адресов).
- Заметка: Значение «lockip» игнорируется когда «lockuser» дезактивированный/false, благодаря тому что механизм для запоминания «users» различается в зависимости от этого значения.

##### «lockuser»
- Определяет ли успешное завершение инстанция reCAPTCHA должны быть привязаны к конкретным пользователям. False = Успешное завершение инстанция reCAPTCHA будет предоставлять доступ ко всем запросам происходящих из того же IP который используемый пользователем что завершение инстанция reCAPTCHA; Куки и хэши не используются; Вместо, IP белый список будет использоваться. True = Успешное завершение инстанция reCAPTCHA будет только предоставлять доступ к пользователю что завершение инстанция reCAPTCHA; Куки и хэши используются чтобы помнить пользователю; IP белый список не используется.

##### «sitekey»
- Это значение должно соответствовать «site key» для вашего reCAPTCHA, которые можно найти в dashboard (панели управления) reCAPTCHA.

##### «secret»
- Это значение должно соответствовать «secret key» для вашего reCAPTCHA, которые можно найти в dashboard (панели управления) reCAPTCHA.

##### «expiry»
- Когда «lockuser» активированный/true (стандарт), для того чтобы вспомнить когда пользователь успешно завершил инстанция reCAPTCHA, для будущие запросы страниц, CIDRAM генерирует стандартный HTTP-куки содержащий хэш что соответствует внутренней записи содержащий тот же хэш; Будущие запросы страниц будут использовать эти соответствующие хэши для проверки что пользователь ранее уже завершил инстанция reCAPTCHA. Когда «lockuser» дезактивированный/false, IP белый список используется для определения ли запросы должны быть разрешены от IP входящих запросов; Записи добавляются в этот белый список когда инстанция reCAPTCHA успешно завершен. Сколько часов должны эти куки, хэши и белый список записей быть действительным? Стандарт = 720 (1 месяц).

##### «logfile»
- Записывать все попытки reCAPTCHA? Если да, указать имя использовать для файла журнала. Если нет, оставьте эту переменную пустым.

*Полезный совет: Если Вы хотите, Вы можете добавить информацию о дате/времени к именам файлов журналов путем включения их во имя: `{yyyy}` для полный год, `{yy}` для сокращенный год, `{mm}` для месяц, `{dd}` для день, `{hh}` для час.*

*Примеры:*
- *`logfile='recaptcha.{yyyy}-{mm}-{dd}-{hh}.txt'`*

##### «signature_limit»
- Максимальное количество сигнатурей разрешено срабатывает, когда будет предлагаться инстанция reCAPTCHA. Стандарт = 1. Если это число превышено для любого конкретного запроса, инстанция reCAPTCHA не будет предлагаться.

##### «api»
- Какой API использовать? V2 или Invisible?

*Примечание для пользователей в Европейском Союзе: Когда CIDRAM сконфигурирован для использования файлов куки (например, когда «lockuser» является true/истинным), предупреждение о печенье отображается на странице в соответствии с требованиями [законодательства ЕС по куки](http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm). Однако при использовании invisible API, CIDRAM пытается автоматически выполнить reCAPTCHA для пользователя, и в случае успеха, это может привести к перезагрузке страницы и созданию куки без предоставления пользователю достаточного времени для фактического просмотра предупреждения о куки. Если это создает для вас юридический риск, возможно, лучше использовать V2 API вместо invisible API (V2 API не автоматизирован и требует, чтобы пользователь сам выполнял вызов reCAPTCHA, тем самым предоставляя возможность увидеть предупреждение куки).*

#### «legal» (Категория)
Конфигурация, относящаяся к требованиям законодательства.

*Для получения дополнительной информации о правовых требованиях и о том, как это может повлиять на ваши требования к конфигурации, обратитесь к разделу «[ЛЕГАЛЬНАЯ ИНФОРМАЦИЯ](#SECTION11)» документации.*

##### «pseudonymise_ip_addresses»
- Псевдонимный IP-адреса при записи файлов журнала? True = Да; False = Нет [Стандарт].

##### «omit_ip»
- Опустить IP-адреса из журналов? True = Да; False = Нет [Стандарт]. Примечание: «pseudonymise_ip_addresses» становится излишним, когда «omit_ip» является «true».

##### «omit_hostname»
- Опустить имена хостов из журналов? True = Да; False = Нет [Стандарт].

##### «omit_ua»
- Опустить пользовательские агенты из журналов? True = Да; False = Нет [Стандарт].

##### «privacy_policy»
- Адрес соответствующей политики конфиденциальности, отображаемый в нижнем колонтитуле любых сгенерированных страниц. Укажите URL-адрес, или оставьте пустым для отключения.

#### «template_data» (Категория)
Директивы/Переменные для шаблоны и темы.

Шаблонный данных относится к HTML-вывода, используемый для генерации «Доступ Закрыт» сообщения отображается для пользователей когда/на загрузки/уплоад файлов блокируются. Если Вы используете персонализированные темы для CIDRAM, HTML-выход получены из `template_custom.html` файл, а в противном случае, HTML-выход получены из `template.html` файл. Переменные, записанные в этом разделе файл конфигурации обрабатываются на HTML-выход в виде заменой любой имена переменных в окружении фигурных скобках найденный в HTML-вывода с соответствующей переменных данных. Например, где `foo="bar"`, любое вхождение `<p>{foo}</p>` найденный в HTML-вывода станет `<p>bar</p>`.

##### «theme»
- Стандартная тема для CIDRAM.

##### «Magnification»
- Увеличение шрифта. Стандарт = 1.

##### «css_url»
- Шаблонный файл для персонализированные темы использует внешние CSS свойства и шаблонный файл для стандарт тема использует внутренние CSS свойства. Поручить CIDRAM использовать персонализированные темы шаблонный файл, указать адрес публичного HTTP в CSS файлов вашей темы используя `css_url` переменная. Если оставить это переменная пустым, CIDRAM будет использовать шаблонный файл для стандарт тема.

#### «PHPMailer» (Категория)
Конфигурация PHPMailer.

##### «EventLog»
- Файл для регистрации всех событий в отношении PHPMailer. Задайте имя файлу, или оставьте пустым чтобы деактивировать опцию.

##### «SkipAuthProcess»
- Установка этой директивы на `true` указывает PHPMailer пропустить обычный процесс проверки подлинности, который обычно возникает при отправке электронной почты через SMTP. Этого следует избегать, поскольку пропуская этот процесс может выдать исходящую электронную почту для атак MITM, но может потребоваться в тех случаях, когда этот процесс препятствует подключению PHPMailer к SMTP-серверу.

##### «Enable2FA»
- Эта директива включает/отключает использование 2FA для фронтенд счетов.

##### «Host»
- Хост SMTP используется для исходящей электронной почты.

##### «Port»
- Номер порта для исходящей электронной почты. Стандарт = 587.

##### «SMTPSecure»
- Протокол для при отправке электронной почты через SMTP (TLS или SSL).

##### «SMTPAuth»
- Эта директива включает/отключает аутентификацию сессия SMTP (обычно ее следует оставить в покое).

##### «Username»
- Имя пользователя для отправки электронной почты через SMTP.

##### «Password»
- Пароль для отправки электронной почты через SMTP.

##### «setFromAddress»
- Адрес отправителя для отправки электронной почты через SMTP.

##### «setFromName»
- Имя отправителя для отправки электронной почты через SMTP.

##### «addReplyToAddress»
- Адрес ответа для отправки электронной почты через SMTP.

##### «addReplyToName»
- Имя ответа для отправки электронной почты через SMTP.

---


### 7. <a name="SECTION7"></a>СИГНАТУР ФОРМАТ

*Смотрите также:*
- *[Что такое «сигнатур»?](#WHAT_IS_A_SIGNATURE)*

#### 7.0 ОСНОВЫ (ДЛЯ ФАЙЛОВ СИГНАТУРЫ)

Все сигнатуры IPv4 придерживаться формат: `xxx.xxx.xxx.xxx/yy [Функция] [Параметр]`.
- `xxx.xxx.xxx.xxx` представляет начало блока CIDR (октеты для первым IP-адреса в блока).
- `yy` представляет размер блока CIDR [1-32].
- `[Функция]` инструктирует скрипт что делать с сигнатур (как сигнатур должны быть обработаны).
- `[Параметр]` представляет все что дополнительная информация что может потребоваться для `[Функция]`.

Все сигнатуры IPv6 придерживаться формат: `xxxx:xxxx:xxxx:xxxx::xxxx/yy [Функция] [Параметр]`.
- `xxxx:xxxx:xxxx:xxxx::xxxx` представляет начало блока CIDR (октеты для первым IP-адреса в блока). Полное обозначение и сокращенное обозначение являются приемлемыми (и каждый из них ДОЛЖЕН следовать соответствующим стандартам для обозначение IPv6, но с одним исключением: IPv6-адрес никогда не может начинаться с аббревиатуры когда использовании в сигнатуры для этого скрипт, из-за способа в котором они реконструируются посредством скрипт; Например, `::1/128` должны быть выражены, когда использовании в сигнатур, в виде `0::1/128`, и `::0/128` выражены в виде `0::/128`).
- `yy` представляет размер блока CIDR [1-128].
- `[Функция]` инструктирует скрипт что делать с сигнатур (как сигнатур должны быть обработаны).
- `[Параметр]` представляет все что дополнительная информация что может потребоваться для `[Функция]`.

CIDRAM сигнатурные файлы ДОЛЖЕН использовать разрыВы строк Unix-стиле (`%0A`, или `\n`)! Другие типы/стили разрыва строки (например, Windows `%0D%0A` или `\r\n` разрыВы строк, Mac `%0D` или `\r` разрыВы строк, и т.д.) МОЖЕТ быть использовано, но НЕ являются предпочтительными. РазрыВы строк не-Unix-стиле будут нормализованы к разрыВы строк Unix-стиле посредством скрипт.

Точное и правильное обозначение CIDR необходимо, в противном случае скрипт не будет признает сигнатур. Дополнительно, все сигнатуры CIDR для этого скрипт ДОЛЖНА начинаться с IP-адресом чья номер IP которого можно разделить равномерно в блок разделения представляющий от его размер блока CIDR (например, если Вы хотите чтобы заблокировать все IP-адреса из `10.128.0.0` к `11.127.255.255`, `10.128.0.0/8` НЕ будут признаны посредством скрипт, но `10.128.0.0/9` и `11.0.0.0/9` используется в сочетании, БУДУТ признаны посредством скрипт).

Все что в сигнатуры файлы которые не признается как качестве сигнатур ни как относятся синтаксис посредством скрипт будут ПРОИГНОРИРОВАНЫ, поэтому это означает что Вы можете безопасно поставить любые данные несигнатурного что Вы хочешь в файлов сигнатур без разбивая их и без разбивая скрипт. Комментарии являются приемлемыми в файлов сигнатур, без какого-либо специального форматирования требуется. Shell-стиле хэширования для комментарии является предпочтительным, но не принудительная; Функционально, это не имеет никакого значения для сценария ли или не Вы выбираете использовать хэширование Shell-стиле для комментарии, но использовать хэширование Shell-стиле может помогает IDE и простые текстовые редакторы чтобы правильно выделить различные части файлов сигнатур (и так, Shell-стиле хэширования может помочь в качестве наглядного пособия при редактировании).

В возможные значения для `[Функция]`:
- Run
- Whitelist
- Greylist
- Deny

Если «Run» используется, когда сигнатур срабатывает, скрипт будет пытаться выполнить (используя заявление `require_once`) внешний PHP скрипт, определяется значением `[Параметр]` (рабочий каталог должен быть каталог „/vault/“ из скрипт).

Примеры: `127.0.0.0/8 Run example.php`

Это может быть полезно если Вы хотите чтобы выполнить некоторые специфические PHP код для некоторых конкретных IP-адресов и/или CIDR.

Если «Whitelist» используется, когда сигнатур срабатывает, скрипт будет сброса всех обнаружений (если есть какие-либо обнаружений) и нарушить функцию тестирования. `[Параметр]` будут игнорироваться. Эта функция является эквивалентом белого списка конкретный IP или CIDR от обнаружения.

Примеры: `127.0.0.1/32 Whitelist`

Если «Greylist» используется, когда сигнатур срабатывает, скрипт будет сброса всех обнаружений (если есть какие-либо обнаружений) и перейти к следующему файлу сигнатуры чтобы продолжить обработку. `[Параметр]` будут игнорироваться.

Примеры: `127.0.0.1/32 Greylist`

Если «Deny» используется, когда сигнатур срабатывает, предполагая что не сигнатур из белый список были срабатывать для данного IP-адреса и/или данного CIDR, доступ к защищенной странице будет запрещен. «Deny» то что Вы хотите использовать на самом деле блокировать IP-адрес и/или диапазон CIDR. Когда какие-либо сигнатуры срабатывает которые используют «Deny», страница «Доступ Закрыт» из скрипт будет генерироваться и запрос на защищенной странице убит.

Значение `[Параметр]` принимаются с «Deny» будут обрабатываться на страницы для «Доступ Закрыт», поставляется клиенту/пользователю как цитируется причиной их доступа к запрашиваемой странице закрытия. Это может быть коротким и простым предложением, объясняя почему Вы выбрали чтобы блокировать их (что-нибудь должно хватить, даже простой „Я не хочу чтобы Ты на моем сайте“), или один из небольшой кучки сокращённых слов поставляемые из сценария, что если используется, будет заменен скриптом с предварительно подготовленной объяснения для почему клиент/пользователь был заблокирован.

Предварительно подготовленные объяснения имеют поддержку L10N и может быть переведен с помощью скриптом основанный на языке который Вы укажете в директиве `lang` для конфигурации скрипт. Дополнительно, Вы можете поручить скрипт игнорировать сигнатуры с «Deny» на основе их значение `[Параметр]` (если они используют эти сокращенные слова) с помощью директив определяется конфигурацией скриптом (каждая сокращенная слово имеет соответствующую директиву чтобы обрабатывать соответствующие сигнатуриь или игнорировать их). Значение `[Параметр]` которые не используют эти сокращенные слова, однако, не имеют поддержку L10N и поэтому не будет переведен с помощью скриптом, и дополнительно, непосредственно не контролируется с конфигурацией скрипт.

Доступные сокращенные слова:
- Bogon
- Cloud
- Generic
- Proxy
- Spam
- Legal
- Malware

#### 7.1 ТЕГИ

##### 7.1.0 ТЕГИ СЕКЦИЙ

Если Вы хотите разделить ваши собственные сигнатуры на отдельные секции, Вы можете идентифицировать эти отдельные секции к скрипт путем добавления «теги секций» сразу же после того как сигнатуры каждого секция, наряду с названием вашей сигнатур секция (смотрите пример ниже).

```
# Секция 1.
1.2.3.4/32 Deny Bogon
2.3.4.5/32 Deny Cloud
4.5.6.7/32 Deny Generic
5.6.7.8/32 Deny Spam
6.7.8.9/32 Deny Proxy
Tag: Секция 1
```

Чтобы разорвать теги секций и для обеспечения что теги не идентифицированы неправильно для сигнатур секции от ранее в файлов сигнатур, просто убедитесь что есть по крайней мере два последовательных разрывы строк между тегом и ваших предыдущих сигнатур секции. Любые сигнатуры без тегов будут «IPv4» или «IPv6» в стандарта (в зависимости от того, какие типы сигнатур срабатывает).

```
1.2.3.4/32 Deny Bogon
2.3.4.5/32 Deny Cloud

4.5.6.7/32 Deny Generic
5.6.7.8/32 Deny Spam
Tag: Секция 1
```

В приведенном выше примере, `1.2.3.4/32` и `2.3.4.5/32` будут помечены как «IPv4», в то время как `4.5.6.7/32` и `5.6.7.8/32` будут помечены как «Секция 1».

Та же логика может применяться и для разделения других типов тегов.

В частности, теги секций могут быть очень полезны для отладки при возникновении ложных срабатываний, обеспечивая легкое средство поиска точного источника проблемы, и может быть очень полезна для фильтрации записей в файле журнала при просмотре файлов журнала через фронтенд (имена секций можно щелкнуть по странице журналов фронтенд и их можно использовать в качестве критерия фильтрации). Если теги секций опущены для некоторых определенных сигнатурей, когда эти сигнатуры запускаются, CIDRAM использует имя файла сигнатуры вместе с типом заблокированного IP-адреса (IPv4 или IPv6) в качестве отказоустойчивый, и таким образом, теги секций полностью необязательны. В некоторых случаях они могут быть рекомендованы, например, когда файлы сигнатуры смутно названы или когда в противном случае может быть трудно четко идентифицировать источник сигнатурей, в результате чего запрос блокируется.

##### 7.1.1 ТЕГИ ИСТЕЧЕНИЯ

Если Вы хотите сигнатуры чтобы истекают через какое-то время, аналогичным способом к теги секций, Вы можете использовать «истечение теги» чтобы указать когда сигнатур должна перестать быть действительным. Истечение теги используют формат «ГГГГ.ММ.ДД» (смотрите пример ниже).

```
# Секция 1.
1.2.3.4/32 Deny Generic
2.3.4.5/32 Deny Generic
Expires: 2016.12.31
```

Истекшие сигнатуры никогда не будут инициироваться ни при каких запросах, несмотря ни на что.

##### 7.1.2 ТЕГИ ПРОИСХОЖДЕНИЯ

Если Вы хотите указать страну происхождения для какой-либо определенной сигнатуры, вы можете сделать это, используя «тег происхождения». Тег происхождения принимает код «[ISO 3166-1 Alpha-2](https://ru.wikipedia.org/wiki/ISO_3166-1_alpha-2)», соответствующий стране происхождения для сигнатурей, к которым он относится. Эти коды должны быть написаны в верхнем регистре (в нижнем или смешанном случае не будут отображаться правильно). Когда используется тег происхождения, он добавляется в запись поля «Почему Заблокированные» для любых запросов, заблокированных в результате сигнатурей, к которым применяется тег.

Если установлен дополнительный компонент «flags CSS», при просмотре лог-файлов через страницу журналов фронтенд, информация, добавленная тегами происхождения, заменяется флагом страны, соответствующей этой информации. Эта информация, будь то в ее необработанном виде или в качестве флага страны, доступна для кликов, а при нажатии, будет фильтровать записи в журнале посредством других аналогичных идентификационных записей журнала (эффективно позволяя тем, кто обращается к странице журналов, фильтровать по стране происхождения).

Примечание: Технически это не какая-либо форма геолокации, из-за чего она не предполагает поиска какой-либо конкретной информации, относящейся к входящим IP-адресам, а скорее просто позволяет нам явно указать страну происхождения для любых запросов, заблокированных конкретными сигнатурами. В одном секция сигнатуры допустимы несколько тегов происхождения.

Гипотетический пример:

```
1.2.3.4/32 Deny Generic
Origin: CN
2.3.4.5/32 Deny Generic
Origin: FR
4.5.6.7/32 Deny Generic
Origin: DE
6.7.8.9/32 Deny Generic
Origin: US
Tag: Foobar
```

Любые теги могут использоваться совместно, и все теги являются необязательными (смотрите пример ниже).

```
# Пример Секция.
1.2.3.4/32 Deny Generic
Origin: US
Tag: Пример Секция
Expires: 2016.12.31
```

##### 7.1.3 ТЕГИ ОТЛОЖЕННЫЕ

Когда большое количество файлов сигнатур установлено и активно используется, инсталляция могут стать довольно сложными, и могут быть некоторые сигнатуры, которые перекрываются. В этих случаях для предотвращения включения нескольких перекрывающихся сигнатурей во время блочных событий, отложенные теги могут использоваться для отсрочки определенных секция сигнатуры в случаях, когда установлен и активно используется какой-либо другой файл сигнатур. Это может быть полезно в случаях, когда некоторые сигнатуры обновляются чаще других, чтобы отложить менее часто обновляемые сигнатуры в пользу более часто обновляемых сигнатурей.

Отложенные теги используются аналогично другим типам тегов. Значение тега должно соответствовать установленному и активно используемому файлу сигнатуры, от которого будет отложено.

Пример:

```
1.2.3.4/32 Deny Generic
Origin: AA
2.3.4.5/32 Deny Generic
Origin: BB
Defers to: preferred_signatures.dat
```

#### 7.2 YAML

##### 7.2.0 ОСНОВЫ YAML

Упрощенная форма маркап YAML может быть использован в сигнатур файлы для целей определения поведения и установок специфичные для отдельных сигнатур секций. Это может быть полезно если Вы хотите чтобы значение ваших директив конфигурации отличаться на основе индивидуальных сигнатур и сигнатур секций (например; если Вы хотите чтобы предоставить адрес электронной почты для поддержки билетов для любых пользователей что заблокированных с помощью один специфична сигнатур, но не хотите чтобы предоставить адрес электронной почты для поддержки билетов для пользователей что заблокированных с помощью любых других сигнатур; если Вы хотите чтобы некоторые специфический сигнатур чтобы вызвать страницу перенаправления; если Вы хотите чтобы отметить секция сигнатур для использования с reCAPTCHA; если Вы хотите чтобы войти блокировал попытки доступа к отдельным файлам на основе индивидуальных сигнатурей и/или сигнатур секций).

Применение маркап YAML в файлов сигнатур совершенно не обязательно (то есть, Вы можете использовать его, если Вы хотите сделать это, но Вы не обязаны делать это), и способен использовать большинство (но не все) директивы конфигурации.

Заметка: Имплементация в CIDRAM для маркап YAML очень упрощенно и очень ограничено; Это предназначен для выполнения требований конкретных для CIDRAM таким образом что имеет знакомство с маркап YAML, но не следует ни соответствует официальным спецификациям (и поэтому не будет вести себя так же как более тщательный имплементации в другом месте, и может не подходить для других проектов в другом месте).

В CIDRAM, сегменты маркап YAML определены для скрипт с тремя черточками („---“), и заканчиваются вместе со содержащими сигнатур секций с разрывы строк двойной. Типичный сегмент маркап YAML в сигнатуры секция состоит из трех черточек на строка сразу же после того как список CIDR и любые теги, с последующим двухмерной списка пары ключ-значение (первое измерение, категории директива конфигурации; второе измерение, директива конфигурации) для которых директивы конфигурации должны быть изменены (и какие ценности) всякий раз когда сигнатуры в этом сигнатур секция срабатывании (см ниже примеры).

```
# Foobar 1.
1.2.3.4/32 Deny Generic
2.3.4.5/32 Deny Generic
4.5.6.7/32 Deny Generic
Tag: Foobar 1
---
general:
 logfile: logfile.{yyyy}-{mm}-{dd}.txt
 logfileApache: access.{yyyy}-{mm}-{dd}.txt
 logfileSerialized: serial.{yyyy}-{mm}-{dd}.txt
 forbid_on_block: false
 emailaddr: username@domain.tld
recaptcha:
 lockip: false
 lockuser: true
 expiry: 720
 logfile: recaptcha.{yyyy}-{mm}-{dd}.txt
 enabled: true
template_data:
 css_url: http://domain.tld/cidram.css

# Foobar 2.
1.2.3.4/32 Deny Generic
2.3.4.5/32 Deny Generic
4.5.6.7/32 Deny Generic
Tag: Foobar 2
---
general:
 logfile: "logfile.Foobar2.{yyyy}-{mm}-{dd}.txt"
 logfileApache: "access.Foobar2.{yyyy}-{mm}-{dd}.txt"
 logfileSerialized: "serial.Foobar2.{yyyy}-{mm}-{dd}.txt"
 forbid_on_block: 503

# Foobar 3.
1.2.3.4/32 Deny Generic
2.3.4.5/32 Deny Generic
4.5.6.7/32 Deny Generic
Tag: Foobar 3
---
general:
 forbid_on_block: 403
 silent_mode: "http://127.0.0.1/"
```

##### 7.2.1 КАК «СПЕЦИАЛЬНО ОТМЕТИТЬ» СИГНАТУР СЕКЦИЙ ДЛЯ ИСПОЛЬЗОВАНИЯ С reCAPTCHA

Когда «usemode» является 0 или 1, сигнатур секций не должны быть специально отметил для использования с reCAPTCHA (потому что они уже будет или не будет использовать reCAPTCHA, на основе этого параметра).

Когда «usemode» является 2, чтобы «специально отметить» сигнатур секций для использования с reCAPTCHA, запись включается в сегменте YAML для этого секция сигнатуры (смотрите пример ниже).

```
# Эта секция будет использовать reCAPTCHA.
1.2.3.4/32 Deny Generic
2.3.4.5/32 Deny Generic
Tag: reCAPTCHA-Enabled
---
recaptcha:
 enabled: true
```

*Заметка: По умолчанию, reCAPTCHA будет предлагаться пользователю только если reCAPTCHA активированный (с „usemode“ как 1, или „usemode“ как 2 с „enabled“ как true), и если точно ОДНА сигнатур срабатывает (не больше, не меньше; если несколько сигнатурей срабатывает, reCAPTCHA НЕ будет предлагаться). Однако, это поведение может быть изменено с помощью директивы «signature_limit».*

#### 7.3 ВСПОМОГАТЕЛЬНЫЙ

##### 7.3.0 ИГНОРИРОВАНИЕ СЕКЦИЯ СИГНАТУРЫ

К тому же, если Вы хотите CIDRAM полностью игнорировать некоторые конкретные секций в любой из сигнатур файлы, Вы можете использовать файл `ignore.dat` чтобы указать какие секций игнорировать. На новой строка, писать `Ignore`, а затем пробел, а затем название секций что Вы хотите CIDRAM игнорировать (смотрите пример ниже).

```
Ignore Секция 1
```

Это также может быть достигнуто с помощью интерфейса, предоставленного на странице «списка секций» на фронтенд в CIDRAM.

##### 7.3.1 ВСПОМОГАТЕЛЬНЫЕ ПРАВИЛА

Если Вы считаете, что писать собственные файлы сигнатуры или настраиваемые модули слишком сложны для вас, более простой альтернативой может быть использование интерфейса, предоставляемого страницей «вспомогательных правил» на фронтенде CIDRAM. Выбрав соответствующие параметры и указав детали о конкретных типах запросов, вы можете указать CIDRAM, как реагировать на эти запросы. «Вспомогательные правила» выполняются после того, как все файлы сигнатур и модули уже завершены.

#### 7.4 <a name="MODULE_BASICS"></a>ОСНОВЫ (ДЛЯ МОДУЛИ)

Модули могут использоваться для расширения функциональности CIDRAM, выполнения дополнительных задач, или обработки дополнительной логики. Как правило, они используются, когда необходимо блокировать запрос на основе, отличной от исходного IP-адреса (таким образом, когда сигнатуры CIDR недостаточно, чтобы заблокировать запрос). Модули написаны как файлы PHP, и, как правило, сигнатуры модулей записываются как PHP-код.

Некоторые хорошие примеры модулей CIDRAM можно найти здесь:
- https://github.com/CIDRAM/CIDRAM-Extras/tree/master/modules

Шаблон для написания новых модулей можно найти здесь:
- https://github.com/CIDRAM/CIDRAM-Extras/blob/master/modules/module_template.php

Из-за того что модули написаны в виде файлов PHP, если Вы хорошо знакомы с кодовой базой CIDRAM, Вы можете структурировать свои модули, и писать свои сигнатуры модуля, как Вы хотите (в рамках того, что возможно с PHP). Однако для вашего удобства и для лучшей взаимной разборчивости между существующими модулями и вашим собственным, рекомендуется проанализировать приведенный выше шаблон, чтобы иметь возможность использовать структуру и формат, которые он предоставляет.

*Заметка: Если вам неудобно работать с кодом PHP, писать собственные модули не рекомендуется.*

Некоторые функции предоставляются CIDRAM для использования модулей, что упрощает создание собственных модулей. Информация об этой функциональности описана ниже.

#### 7.5 ФУНКЦИОНАЛЬНОСТЬ МОДУЛЯ

##### 7.5.0 «$Trigger»

Сигнатуры модулей обычно пишутся с помощью `$Trigger`. В большинстве случаев это closure будет более важным, чем что-либо еще для написания модулей.

`$Trigger` принимает 4 параметра: `$Condition`, `$ReasonShort`, `$ReasonLong` (необязательно), и `$DefineOptions` (необязательно).

Оценивается правдоподобность `$Condition`, и если «true», сигнатур «срабатывает». Если «false», сигнатур *не* «срабатывает». `$Condition` обычно содержит PHP-код для оценки состояния, которое должно вызвать блокировку запроса.

`$ReasonShort` указывается в поле «Почему Заблокированные», когда сигнатур «срабатывает».

`$ReasonLong` – Это необязательное сообщение, которое будет отображаться пользователю/клиенту, когда они заблокированы, чтобы объяснить, почему они были заблокированы. По умолчанию используется стандартное сообщение «Доступ Закрыт» при его отсутствии.

`$DefineOptions` – Это необязательный массив, содержащий пары ключ/значение, используемые для определения параметров конфигурации, специфичных для инстанция запроса. Параметры конфигурации будут применены, когда сигнатур будет срабатывает.

`$Trigger` возвращает «true», когда сигнатур «срабатывает», а когда нет, «false».

Чтобы использовать это closure в своем модуле, помните, во-первых, чтобы наследовать его из родительской области:
```PHP
$Trigger = $CIDRAM['Trigger'];
```

##### 7.5.1 «$Bypass»

Байпасы сигнатуры обычно пишутся с помощью `$Bypass`.

`$Bypass` принимает 3 параметра: `$Condition`, `$ReasonShort`, и `$DefineOptions` (необязательно).

Оценивается правдоподобность `$Condition`, и если «true», сигнатур «срабатывает». Если «false», байпас *не* «срабатывает». `$Condition` обычно содержит PHP-код для оценки состояния, которое *не* должно вызвать блокировку запроса.

`$ReasonShort` указывается в поле «Почему Заблокированные», когда байпас «срабатывает».

`$DefineOptions` – Это необязательный массив, содержащий пары ключ/значение, используемые для определения параметров конфигурации, специфичных для инстанция запроса. Параметры конфигурации будут применены, когда байпас будет срабатывает.

`$Bypass` возвращает «true», когда байпас «срабатывает», а когда нет, «false».

Чтобы использовать это closure в своем модуле, помните, во-первых, чтобы наследовать его из родительской области:
```PHP
$Bypass = $CIDRAM['Bypass'];
```

##### 7.5.2 «$CIDRAM['DNS-Reverse']»

Это можно использовать для получения имени хоста IP-адреса. Если Вы хотите создать модуль для блокирования имен хостов, это закрытие может быть полезно.

Пример:
```PHP
<?php
/** Inherit trigger closure (see functions.php). */
$Trigger = $CIDRAM['Trigger'];

/** Fetch hostname. */
if (empty($CIDRAM['Hostname'])) {
    $CIDRAM['Hostname'] = $CIDRAM['DNS-Reverse']($CIDRAM['BlockInfo']['IPAddr']);
}

/** Example signature. */
if ($CIDRAM['Hostname'] && $CIDRAM['Hostname'] !== $CIDRAM['BlockInfo']['IPAddr']) {
    $Trigger($CIDRAM['Hostname'] === 'www.foobar.tld', 'Foobar.tld', 'Hostname Foobar.tld is not allowed.');
}
```

#### 7.6 МОДУЛЬНЫЕ ПЕРЕМЕННЫЕ

Модули выполняются в пределах своей собственной области действия, а любые переменные, определенные модулем, не будут доступны для других модулей, или родительскому скрипту, если они не хранятся в массиве `$CIDRAM` (все остальное очищается после завершения выполнения модуля).

Ниже перечислены некоторые общие переменные, которые могут быть полезны для вашего модуля:

Переменная | Описание
----|----
`$CIDRAM['BlockInfo']['DateTime']` | Текущая дата и время.
`$CIDRAM['BlockInfo']['IPAddr']` | IP-адрес для текущего запроса.
`$CIDRAM['BlockInfo']['ScriptIdent']` | Версия сценария CIDRAM.
`$CIDRAM['BlockInfo']['Query']` | Запрос текущего запроса.
`$CIDRAM['BlockInfo']['Referrer']` | Ссылка для текущего запроса (если таковая существует).
`$CIDRAM['BlockInfo']['UA']` | Пользовательский агент для текущего запроса.
`$CIDRAM['BlockInfo']['UALC']` | Пользовательский агент для текущего запроса (в нижнем регистре).
`$CIDRAM['BlockInfo']['ReasonMessage']` | Сообщение, которое будет отображаться пользователю/клиенту для текущего запроса, если они заблокированы.
`$CIDRAM['BlockInfo']['SignatureCount']` | Количество сигнатурей, инициированных для текущего запроса.
`$CIDRAM['BlockInfo']['Signatures']` | Справочная информация для любых сигнатур, инициированных для текущего запроса.
`$CIDRAM['BlockInfo']['WhyReason']` | Справочная информация для любых сигнатур, инициированных для текущего запроса.

---


### 8. <a name="SECTION8"></a>ИЗВЕСТНЫЕ ПРОБЛЕМЫ СОВМЕСТИМОСТИ

Было обнаружено, что следующие пакеты и продукты несовместимы с CIDRAM:
- __[Endurance Page Cache](https://github.com/CIDRAM/CIDRAM/issues/52)__
- __[Mix.com](https://github.com/CIDRAM/CIDRAM/issues/80)__

Модули были доступны для обеспечения совместимости следующих пакетов и продуктов с CIDRAM:
- __[BunnyCDN](https://github.com/CIDRAM/CIDRAM/issues/56)__

*Смотрите также: [Графики Совместимости](https://maikuolan.github.io/Compatibility-Charts/).*

---


### 9. <a name="SECTION9"></a>ЧАСТО ЗАДАВАЕМЫЕ ВОПРОСЫ (FAQ)

- [Что такое «сигнатур»?](#WHAT_IS_A_SIGNATURE)
- [Что такое «CIDR»?](#WHAT_IS_A_CIDR)
- [Что такое «ложноположительный»?](#WHAT_IS_A_FALSE_POSITIVE)
- [Может CIDRAM блокировать целые страны?](#BLOCK_ENTIRE_COUNTRIES)
- [Как часто обновляются сигнатуры?](#SIGNATURE_UPDATE_FREQUENCY)
- [Я столкнулся с проблемой при использовании CIDRAM, и я не знаю, что с этим делать! Пожалуйста помоги!](#ENCOUNTERED_PROBLEM_WHAT_TO_DO)
- [Я заблокирован CIDRAM с веб-сайта, который я хочу посетить! Пожалуйста помоги!](#BLOCKED_WHAT_TO_DO)
- [Я хочу использовать CIDRAM с версией PHP ниже 5.4.0; Вы можете помочь?](#MINIMUM_PHP_VERSION)
- [Могу ли я использовать одну установку CIDRAM для защиты нескольких доменов?](#PROTECT_MULTIPLE_DOMAINS)
- [Я не хочу возиться с установкой этого и заставить его работать с моим сайтом; Могу я просто заплатить вам за все это?](#PAY_YOU_TO_DO_IT)
- [Могу ли я нанять вас или любого из разработчиков этого проекта для частной работы?](#HIRE_FOR_PRIVATE_WORK)
- [Мне нужны модификации специалиста, настройки и т.д.; Вы можете помочь?](#SPECIALIST_MODIFICATIONS)
- [Я разработчик, веб-дизайнер, или программист. Могу ли я принять или предложить работу, связанную с этим проектом?](#ACCEPT_OR_OFFER_WORK)
- [Я хочу внести свой вклад в проект; Я могу сделать это?](#WANT_TO_CONTRIBUTE)
- [Могу ли я использовать cron для автоматического обновления?](#CRON_TO_UPDATE_AUTOMATICALLY)
- [Что такое «нарушения»?](#WHAT_ARE_INFRACTIONS)
- [Может ли CIDRAM блокировать имена хостов?](#BLOCK_HOSTNAMES)
- [Что я могу использовать для «default_dns»?](#WHAT_CAN_I_USE_FOR_DEFAULT_DNS)
- [Могу ли я использовать CIDRAM для защиты других вещей, помимо веб-сайтов (например, серверов электронной почты, FTP, SSH, IRC и т.д.)?](#PROTECT_OTHER_THINGS)
- [Будут ли возникать проблемы, если я буду использовать CIDRAM одновременно с использованием CDN или кеширования?](#CDN_CACHING_PROBLEMS)
- [Будет ли CIDRAM защищать мой сайт от атак DDoS?](#DDOS_ATTACKS)
- [Когда я активирую или деактивирую модули или файлы сигнатуры на странице обновлений, он сортирует их по алфавиту в конфигурации. Могу ли я изменить способ сортировки?](#CHANGE_COMPONENT_SORT_ORDER)

#### <a name="WHAT_IS_A_SIGNATURE"></a>Что такое «сигнатур»?

В контексте CIDRAM, «сигнатур» относится к данным, которые служат индикатора/идентификатора, для чего-то конкретного что мы ищем, обычно IP-адрес или CIDR, и включает в себя некоторые инструкции для CIDRAM, говоря это лучший способ ответить когда сталкивается с тем что мы ищем. Типичная сигнатур для CIDRAM выглядит примерно так:

Для «файлов сигнатуры»:

`1.2.3.4/32 Deny Generic`

Для «модули»:

```PHP
$Trigger(strpos($CIDRAM['BlockInfo']['UA'], 'Foobar') !== false, 'Foobar-UA', 'User agent "Foobar" not allowed.');
```

*Заметка: Сигнатуры для «файлов сигнатуры» и сигнатуры для «модули» – Это не одно и то же.*

Часто (но не всегда), сигнатуры будут объединены в группы, Формирование «сигнатур секций», часто сопровождается комментариями, маркуп, и/или связанные метаданные, которые могут быть использованы для обеспечения дополнительного контекста для сигнатуры и/или дальнейшей инструкции.

#### <a name="WHAT_IS_A_CIDR"></a>Что такое «CIDR»?

«CIDR» является акронимом для «Classless Inter-Domain Routing» („Бесклассовая адресация“) *[[1](https://ru.wikipedia.org/wiki/%D0%91%D0%B5%D1%81%D0%BA%D0%BB%D0%B0%D1%81%D1%81%D0%BE%D0%B2%D0%B0%D1%8F_%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0%D1%86%D0%B8%D1%8F), [2](http://whatismyipaddress.com/cidr)]*, и это акроним, который используется как часть имени этого пакета, «CIDRAM», который является акронимом для «Classless Inter-Domain Routing Access Manager» („Бесклассовая Адресация Доступа Менеджер“).

Однако, в контексте CIDRAM (таких как, в этой документации, в рамках обсуждений касающихся CIDRAM, или в данных языка CIDRAM), когда «CIDR» (единственное число) или «CIDRs» (множественное число) упоминается (и поэтому, посредством чего мы используем эти слова как существительные в своем собственном праве, в отличие от акронимов), наш смысл и намерение: Подсеть (или подсетей), выраженные с использованием нотации CIDR. Причина по которой CIDR (или CIDRs) используется вместо подсети (или подсетей): Чтобы уточнить, что это специально подсети, выраженные с использованием нотации CIDR, которая ссылается на (потому нотации CIDR только один из нескольких способов, которыми подсети могут быть выражены). Поэтому CIDRAM можно считать «подсети доступа менеджер».

Хотя это двойное значение «CIDR» может представлять некоторую двусмысленность в некоторых случаях, это объяснение, наряду с предоставленным контекстом, должен помочь решить такую двусмысленность.

#### <a name="WHAT_IS_A_FALSE_POSITIVE"></a>Что такое «ложноположительный»?

Термин «ложноположительный» (*альтернативно: «ложноположительными ошибка»; «ложная сигнализация»*; Английский: *false positive*; *false positive error*; *false alarm*), описал очень просто, и в обобщенном контексте, используется при проверке условия, для ссылаясь на результаты этого теста, когда результаты будут положительный (то есть, условия определяется будут «положительный», или «истинно»), но как ожидается будет (или должно было) отрицательный (то есть, условие, в действительности, является «отрицательный», или «ложно»). Термин «ложноположительный» можно было бы считать аналогом «плачет волк» (английский идиома в которой условие проверяется является ли там волк возле стада, условие является «ложно» в том, что нет никакого волка возле стада, и условие сообщается «положительный» посредством пастух путем кричать «волк, волк»), или аналогично ситуации в медицинском тестировании в которой пациент диагностирован как какую-то болезнь, когда в действительности, у них нет болезни.

Связанные результаты при проверке условия можно описать с использование терминов «истинноположительный», «истинноотрицательный» и «ложноотрицательный». «Истинноположительный» описывает когда результаты испытаний и фактическое состояние условия оба являются истинными (или положительные), и «истинноотрицательный» описывает когда результаты испытаний и фактическое состояние условия оба являются ложными (или отрицательные); «Истинноположительный» или «истинноотрицательный» рассматриваются как «правильный вывод». Противоположностью «ложноположительный» является «ложноотрицательный»; «Ложноотрицательный» описывает когда результаты испытаний отрицательные (то есть, условие определяется как отрицательные, или ложными), но как ожидается будет (или должно было) положительные (то есть, условие, в действительности, является «положительный», или «истинно»).

В контексте CIDRAM, эти термины относятся к сигнатур CIDRAM и что/кого они блокируют. Когда CIDRAM блокирует IP-адрес из-за плохой, устаревшей или неправильной сигнатур, но не должно быть сделано, или когда он делает это по неправильным причинам, мы называем это событие как «ложноположительный». Когда CIDRAM не удается блокировать IP-адрес, который должен был быть заблокированы, из-за непредвиденных угроз, недостающие сигнатур или недостатки в своих сигнатурей, мы называем это событие как «обнаружение не удалось» (аналогична «ложноотрицательный»).

Это может быть суммированы в таблице ниже:

&nbsp; | CIDRAM *НЕ* должны блокировать IP-адрес | CIDRAM *ДОЛЖНЫ* блокировать IP-адрес
---|---|---
CIDRAM *НЕ* блокирует IP-адрес | Истинноотрицательный (правильный вывод) | Обнаружение не удалось (аналогична ложноотрицательный)
CIDRAM *ДЕЛАЕТ* блокирует IP-адрес | __Ложноположительный__ | Истинноположительный (правильный вывод)

#### <a name="BLOCK_ENTIRE_COUNTRIES"></a>Может CIDRAM блокировать целые страны?

Да. Самый простой способ добиться этого было бы установить некоторые из опционную страну списки блоков обеспечивается от Macmathan. Это можно сделать с помощью нескольких простых кликов непосредственно со фронтенд обновления страница, или, если Вы предпочитаете чтобы фронтенд оставался деактивированными, загружая их непосредственно со **[страницы загрузки для относящуюся к опционную страну списки блоков](https://bitbucket.org/macmathan/blocklists)**, загрузка их в vault, и цитируя их имена в соответствующих директивах конфигурации.

#### <a name="SIGNATURE_UPDATE_FREQUENCY"></a>Как часто обновляются сигнатуры?

Частота обновления зависит от файлов сигнатур. Предпринята попытка обновить файлов сигнатур в максимально возможной степени, но, потому всех нас есть различные другие обязательства, наша жизнь вне проекта, и мы не получаем материальной компенсации (т.е., оплата) за наши усилия по проекту, точный график обновления не может быть гарантирован. В общем, обновления происходят, когда есть время, и мы стараемся расставить приоритеты на основе необходимости и частота изменения между диапазонами. Помощь всегда приветствуется, если Вы готовы предложить любую.

#### <a name="ENCOUNTERED_PROBLEM_WHAT_TO_DO"></a>Я столкнулся с проблемой при использовании CIDRAM, и я не знаю, что с этим делать! Пожалуйста помоги!

- Используете ли Вы последнюю версию программного обеспечения? Используете ли Вы последние версии ваших файлов сигнатуры? Если ответ на любой из этих двух вопросов отрицательный, попробуйте сначала обновить все, и попытайтесь решить проблема. Если оно сохраняется, продолжайте чтение.
- Вы проверили всю документацию? Если нет, сделайте это. Если проблема не может быть решена с помощью документации, продолжите чтение.
- Вы проверили **[странице «issues»](https://github.com/CIDRAM/CIDRAM/issues)**, чтобы узнать упоминалась ли эта проблема ранее? Если это было уже упоминалось, проверить были ли предоставлены какие-либо предложения, идеи и/или решения, и следуйте по необходимости чтобы попытаться решить проблема.
- Если проблема не решена, пожалуйста, обратитесь за помощью, создав новую «issue» на странице «issues».

#### <a name="BLOCKED_WHAT_TO_DO"></a>Я заблокирован CIDRAM с веб-сайта, который я хочу посетить! Пожалуйста помоги!

CIDRAM предоставляет владельцам веб-сайтов возможность блокировать нежелательный трафик, но владельцы веб-сайтов обязаны сами решать, как они хотят использовать CIDRAM. В случае ложноположительный, файлами сигнатуры обычно включается в CIDRAM, поправки могут быть сделаны, но в отношении того чтобы быть разблокированным с определенных веб-сайтов, Вам необходимо связаться с владельцами этих веб-сайтов. В случаях когда исправления сделаны, по крайней мере, они должны будут обновить свои файлов сигнатур и/или инсталляция, и в других случаях (таких как, например, когда они есть модифицировал свою инсталляция, создали свои собственные сигнатуры, и т.д.), ответственность за решение вашей проблемы полностью принадлежит им, и полностью вне нашего контроля.

#### <a name="MINIMUM_PHP_VERSION"></a>Я хочу использовать CIDRAM с версией PHP ниже 5.4.0; Вы можете помочь?

Нет. PHP 5.4.0 достиг официального EoL („End of Life“, или конец жизни) в 2014 году, и расширенная поддержка безопасности была прекращена в 2015 году. На момент написания этой это 2017 году, а PHP 7.1.0 уже доступен. В настоящее время использование CIDRAM с PHP 5.4.0 и всеми доступными новыми версиями PHP поддерживается, но если Вы попытаетесь использовать CIDRAM с любыми более старыми версиями PHP, поддержка не будет предоставлена.

*Смотрите также: [Графики Совместимости](https://maikuolan.github.io/Compatibility-Charts/).*

#### <a name="PROTECT_MULTIPLE_DOMAINS"></a>Могу ли я использовать одну установку CIDRAM для защиты нескольких доменов?

Да. CIDRAM инсталляций не привязаны к определенным домены, и поэтому может использоваться для защиты нескольких доменов. В общем, мы ссылаемся на CIDRAM инсталляций, защищающие только один домен, как «однодоменные инсталляций», и мы ссылаемся на CIDRAM инсталляций, защищающие несколько доменов и/или поддоменов, как «многодоменные инсталляций». Если Вы используете многодоменную инсталляция, и необходимо использовать разные файлы сигнатур для разных доменов, или необходимо настроить CIDRAM по-разному для разных доменов, это можно сделать. После загрузки файла конфигурации (`config.ini`), CIDRAM проверит наличие «файл переопределения конфигурации» специфичные для запрашиваемого домена или поддомена (`xn----7sbaabjijgdno9cdqkbchu3o.tld.config.ini`), и если он будет найден, любые значений конфигурации, определенные в файл переопределения конфигурации, будет использоваться для экземпляра выполнения вместо значений конфигурации, определенных конфигурационным файлом. Конфигурация переопределяет файлы, идентичные конфигурационному файлу, и на Ваше усмотрение, Может содержать все директивы конфигурации, доступные для CIDRAM, или какой бы небольшой подсекция требуется, при необходимости. Имена для конфигурация переопределяет файлов соответствуют домену для которого они предназначены (так, например, если Вам нужен файл переопределения конфигурации для домена, `http://www.some-domain.tld/`, его файл переопределения конфигурации должен иметь имя `some-domain.tld.config.ini`, и должен быть помещен в `vault`, вместе с файлом конфигурации, `config.ini`). Доменные имена извлекаются из заголовка `HTTP_HOST` запроса; «www» игнорируется.

#### <a name="PAY_YOU_TO_DO_IT"></a>Я не хочу возиться с установкой этого и заставить его работать с моим сайтом; Могу я просто заплатить вам за все это?

Может быть. Это рассматривается в каждом конкретном случае. Расскажите, что вам нужно, что Вы предлагаете, и мы расскажем вам, можем ли мы помочь.

#### <a name="HIRE_FOR_PRIVATE_WORK"></a>Могу ли я нанять вас или любого из разработчиков этого проекта для частной работы?

*См. Выше.*

#### <a name="SPECIALIST_MODIFICATIONS"></a>Мне нужны модификации специалиста, настройки и т.д.; Вы можете помочь?

*См. Выше.*

#### <a name="ACCEPT_OR_OFFER_WORK"></a>Я разработчик, веб-дизайнер, или программист. Могу ли я принять или предложить работу, связанную с этим проектом?

Да. Наша лицензия не запрещает это.

#### <a name="WANT_TO_CONTRIBUTE"></a>Я хочу внести свой вклад в проект; Я могу сделать это?

Да. Вклады в проект очень приветствуются. Для получения дополнительной информации см. «CONTRIBUTING.md».

#### <a name="CRON_TO_UPDATE_AUTOMATICALLY"></a>Могу ли я использовать cron для автоматического обновления?

Да. API встроен в фронтенд для взаимодействия со обновления страница через внешние скрипты. Имеется отдельный скрипт: «[Cronable](https://github.com/Maikuolan/Cronable)». Он может использоваться вашим cron manager или cron scheduler для автоматического обновления этого и других поддерживаемых пакетов (этот скрипт предоставляет собственную документацию).

#### <a name="WHAT_ARE_INFRACTIONS"></a>Что такое «нарушения»?

«Нарушения» определяют, когда IP-адрес, который еще не заблокирован никакими конкретными сигнатурными файлами, должен блокироваться для любых будущих запросов, и они тесно связаны с отслеживания IP. Существуют некоторые функциональные возможности и модули, которые позволяют блокировать запросы по причинам, отличным от IP-адреса источника (такие как наличие пользовательских агентов [user agents], соответствующих спам-ботам или инструментами взлома, опасные запросы, поддельный DNS и т.д.), и когда это произойдет, может произойти «нарушение». Они предоставляют возможность идентифицировать IP-адреса, которые соответствуют нежелательным запросам, которые еще не могут быть заблокированы с помощью каких-либо конкретных файлов сигнатур. Нарушения обычно соответствуют 1-к-1 с количеством блокировок IP, но не всегда (серьезные события блока могут иметь значение нарушения, превышающее одно, и если «track_mode» false, нарушения не будут происходить для событий блоков, инициированных исключительно сигнатурными файлами).

#### <a name="BLOCK_HOSTNAMES"></a>Может ли CIDRAM блокировать имена хостов?

Да. Для этого вам нужно создать файл пользовательского модуля. *Видеть: [ОСНОВЫ (ДЛЯ МОДУЛИ)](#MODULE_BASICS)*.

#### <a name="WHAT_CAN_I_USE_FOR_DEFAULT_DNS"></a>Что я могу использовать для «default_dns»?

Как правило, IP-адрес любого надежного DNS-сервера должен быть достаточным. Если вы ищете предложения, [public-dns.info](https://public-dns.info/) и [OpenNIC](https://servers.opennic.org/) предоставляют обширные списки известных общедоступных DNS-серверов. В качестве альтернативы см. таблицу ниже:

IP | Оператор
---|---
`1.1.1.1` | [Cloudflare](https://www.cloudflare.com/learning/dns/what-is-1.1.1.1/)
`4.2.2.1`<br />`4.2.2.2`<br />`209.244.0.3`<br />`209.244.0.4` | [Level3](https://www.level3.com/en/)
`8.8.4.4`<br />`8.8.8.8`<br />`2001:4860:4860::8844`<br />`2001:4860:4860::8888` | [Google Public DNS](https://developers.google.com/speed/public-dns/)
`9.9.9.9`<br />`149.112.112.112` | [Quad9 DNS](https://www.quad9.net/)
`84.200.69.80`<br />`84.200.70.40`<br />`2001:1608:10:25::1c04:b12f`<br />`2001:1608:10:25::9249:d69b` | [DNS.WATCH](https://dns.watch/index)
`208.67.220.220`<br />`208.67.222.220`<br />`208.67.222.222` | [OpenDNS Home](https://www.opendns.com/)
`77.88.8.1`<br />`77.88.8.8`<br />`2a02:6b8::feed:0ff`<br />`2a02:6b8:0:1::feed:0ff` | [Yandex.DNS](https://dns.yandex.com/advanced/)
`8.20.247.20`<br />`8.26.56.26` | [Comodo Secure DNS](https://www.comodo.com/secure-dns/)
`216.146.35.35`<br />`216.146.36.36` | [Dyn](https://help.dyn.com/internet-guide-setup/)
`64.6.64.6`<br />`64.6.65.6` | [Verisign Public DNS](https://www.verisign.com/en_US/security-services/public-dns/index.xhtml)
`37.235.1.174`<br />`37.235.1.177` | [FreeDNS](https://freedns.zone/en/)
`156.154.70.1`<br />`156.154.71.1`<br />`2610:a1:1018::1`<br />`2610:a1:1019::1` | [Neustar Security](https://www.security.neustar/dns-services/free-recursive-dns-service)
`45.32.36.36`<br />`45.77.165.194`<br />`179.43.139.226` | [Fourth Estate](https://dns.fourthestate.co/)
`74.82.42.42` | [Hurricane Electric](https://dns.he.net/)
`195.46.39.39`<br />`195.46.39.40` | [SafeDNS](https://www.safedns.com/en/features/)
`81.218.119.11`<br />`209.88.198.133` | [GreenTeam Internet](http://www.greentm.co.uk/)
`89.233.43.71`<br />`91.239.100.100 `<br />`2001:67c:28a4::`<br />`2a01:3a0:53:53::` | [UncensoredDNS](https://blog.uncensoreddns.org/)
`208.76.50.50`<br />`208.76.51.51` | [SmartViper](http://www.markosweb.com/free-dns/)

*Заметка: Я не предъявляю никаких претензий или гарантий относительно практики конфиденциальности, безопасности, эффективности и надежности любых DNS-сервисов, перечисленных или иным образом. Пожалуйста, сделайте собственное исследование, когда принимаете решения о них.*

#### <a name="PROTECT_OTHER_THINGS"></a>Могу ли я использовать CIDRAM для защиты других вещей, помимо веб-сайтов (например, серверов электронной почты, FTP, SSH, IRC и т.д.)?

Вы можете (юридически), но не должны (технически; практически). Наша лицензия не ограничивает какие технологии используют CIDRAM, но CIDRAM является WAF (брандмауэром веб-приложений) и всегда предназначался для защиты веб-сайтов. Поскольку он не был разработан с учетом других технологий, он вряд ли будет эффективным или обеспечит надежную защиту других технологий, реализация, вероятно, будет сложной, и риск ложноположительный и пропущенных обнаружений очень высок.

#### <a name="CDN_CACHING_PROBLEMS"></a>Будут ли возникать проблемы, если я буду использовать CIDRAM одновременно с использованием CDN или кеширования?

Возможно. Это зависит от характера рассматриваемой услуги и того, как вы ее используете. Как правило, если вы только кэшируете статические активы (изображения, CSS, и т.д.; все, что обычно не меняется со временем), проблем не должно быть. Однако могут возникнуть проблемы, если вы кэшируете данные, которые в противном случае обычно генерировались бы динамически при запросе, или если вы кэшируете результаты запросов POST (это по существу сделает ваш сайт и его среду обязательным статическим, и CIDRAM вряд ли обеспечит какую-либо значимую выгоду в обязательной статической среде). Также могут быть особые требования к конфигурации для CIDRAM, в зависимости от того какой CDN или кеширующий сервис вы используете (вам необходимо убедиться, что CIDRAM настроен правильно для конкретной службы CDN или кеширования, которую вы используете). Неправильное конфигурирование CIDRAM может привести к значительно проблематичным ложным срабатываниям и пропущенным обнаружениям.

#### <a name="DDOS_ATTACKS"></a>Будет ли CIDRAM защищать мой сайт от атак DDoS?

Краткий ответ: Нет.

Чуть более длинный ответ: CIDRAM поможет уменьшить влияние нежелательного трафика на ваш сайт (таким образом снижая затраты на пропускную способность вашего веб-сайта), поможет уменьшить влияние нежелательного трафика на ваше оборудование (например, способность вашего сервера обрабатывать и обслуживать запросы), и может помочь уменьшить различные другие потенциальные негативные последствия, связанные с нежелательным трафиком. Однако для понимания этого вопроса необходимо помнить две важные вещи.

Во-первых, CIDRAM является пакетом PHP и, следовательно, работает на компьютере, где установлен PHP. Это означает, что CIDRAM может видеть и блокировать запрос только *после* того, как сервер уже получил его. Во-вторых, эффективное смягчение DDoS должно отфильтровывать запросы *до* того, как они достигнут сервера, на который нацелена атака DDoS. В идеале, атаки DDoS должны быть обнаружены и смягчены решениями, способными отбрасывать или перенаправлять трафик, связанный с атаками, прежде чем он достигнет целевого сервера в первую очередь.

Это может быть реализовано с использованием специализированных, локальных аппаратных решений, и/или облачные решения, такие как специализированные службы смягчения DDoS, маршрутизация DNS домена через сети, устойчивые к DDoS, облачная фильтрация, или их комбинацию. В любом случае, этот предмет слишком сложный, чтобы подробно объяснить всего лишь параграф или два, поэтому я бы рекомендовал продолжить исследования, если это предмет, который вы хотите продолжить. Когда истинный характер атак DDoS будет правильно понят, этот ответ будет иметь больше смысла.

#### <a name="CHANGE_COMPONENT_SORT_ORDER"></a>Когда я активирую или деактивирую модули или файлы сигнатуры на странице обновлений, он сортирует их по алфавиту в конфигурации. Могу ли я изменить способ сортировки?

Да. Если вам нужно заставить некоторые файлы выполнить в определенном порядке, вы можете добавить некоторые произвольные данные до их имен в директиве конфигурации, где они указаны, разделенные двоеточием. Когда страница обновлений впоследствии сортирует файлы снова, эти добавленные произвольные данные будут влиять на порядок сортировки, в результате чего они должны выполняться в том порядке, в котором вы хотите, без необходимости переименовывать их.

Например, предполагая конфигурационную директиву с файлами, перечисленными ниже:

`file1.php,file2.php,file3.php,file4.php,file5.php`

Если вы хотите, чтобы `file3.php` выполнялся первым, вы могли бы добавить что-то вроде `aaa:` перед именем файла:

`file1.php,file2.php,aaa:file3.php,file4.php,file5.php`

Затем, если новый файл, `file6.php`, активирован, когда страница обновлений снова сортирует их все, это должно закончиться следующим образом:

`aaa:file3.php,file1.php,file2.php,file4.php,file5.php,file6.php`

Такая же ситуация, когда файл деактивирован. Наоборот, если вы хотите, чтобы файл выполнялся последним, вы могли бы добавить что-то вроде `zzz:` перед именем файла. В любом случае вам не нужно будет переименовывать указанный файл.

---


### 11. <a name="SECTION11"></a>ЛЕГАЛЬНАЯ ИНФОРМАЦИЯ

#### 11.0 ПРЕАМБУЛА РАЗДЕЛА

Этот раздел документации предназначен для описания возможных юридических соображений, касающихся использования и реализации пакета, и предоставления некоторой базовой связанной информации. Это может быть важно для некоторых пользователей в качестве средства обеспечения соответствия любым юридическим требованиям, которые могут существовать в странах, в которых они работают, и некоторым пользователям, возможно, придется корректировать свои политики веб-сайта в соответствии с этой информацией.

Прежде всего, поймите, что я (автор пакета) не квалифицированный юрист любого рода. Поэтому я не имею юридической силы для предоставления юридических консультаций. Кроме того, в некоторых случаях, точные законодательные требования могут различаться между различными странами и юрисдикциями, и эти различные юридические требования могут иногда противоречить (таких как, например, в случае стран, которые поддерживают права на [неприкосновенность частной жизни](https://ru.wikipedia.org/wiki/%D0%9D%D0%B5%D0%BF%D1%80%D0%B8%D0%BA%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%BE%D0%B9_%D0%B6%D0%B8%D0%B7%D0%BD%D0%B8), и [право быть забытым](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B0%D0%B2%D0%BE_%D0%BD%D0%B0_%D0%B7%D0%B0%D0%B1%D0%B2%D0%B5%D0%BD%D0%B8%D0%B5), по сравнению с странами, которые предпочитают [расширенное хранение данных](https://ru.wikipedia.org/wiki/%D0%97%D0%B0%D0%BA%D0%BE%D0%BD_%D0%AF%D1%80%D0%BE%D0%B2%D0%BE%D0%B9)). Учтите также, что доступ к пакету не ограничивается конкретными странами или юрисдикциями, и, следовательно, пользовательская база пакетов, вероятно, будет географически разнообразной. При рассмотрении этих вопросов, я не в состоянии заявить, что это означает быть «юридически совместимым» для всех пользователей, во всех отношениях. Однако я надеюсь, что приведенная здесь информация поможет вам самим принять решение о том, что вы должны сделать, чтобы оставаться юридически совместимым в контексте пакета. Если у вас есть какие-либо сомнения относительно информации, или если вам нужна дополнительная помощь и рекомендации с юридической точки зрения, Я бы рекомендовал обратиться к квалифицированному юристу.

#### 11.1 ОТВЕТСТВЕННОСТЬ

В соответствии с уже заявленной лицензией на пакет, пакет предоставляется без каких-либо гарантий. Это включает (но не ограничивается) всю сферу ответственности. Пакет предоставляется вам для вашего удобства, в надежде, что он будет полезен, и что он принесет вам определенную пользу. Однако, независимо от того, используете ли вы или реализуете пакет, это ваш собственный выбор. Вы не обязаны использовать или внедрять пакет, но когда вы это делаете, вы несете ответственность за это решение. Ни я, ни другие участники пакета не несут юридическую ответственность за последствия решений, которые вы принимаете, независимо от того, являются ли они прямыми, косвенными, подразумеваемыми или нет.

#### 11.2 ТРЕТЬИ ЛИЦА

В зависимости от его точной конфигурации и реализации пакет может передавать и обмениваться информацией с третьими лицами в некоторых случаях. Эта информация может быть определена как «[персональные данные](https://ru.wikipedia.org/wiki/%D0%9F%D0%B5%D1%80%D1%81%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5)» (PII) в некоторых контекстах, в некоторых юрисдикциях.

Как эта информация может использоваться этими третьими лицами, зависит от различных политик, установленных этими третьими лицами, и выходит за рамки этой документации. Однако, во всех таких случаях обмен информацией с этими третьими лицами может быть отключен. Во всех таких случаях, если вы решите включить его, вы несете ответственность за исследование любых проблем, которые могут возникнуть в отношении конфиденциальности, безопасности и использования PII этими третьими лицами. Если существуют какие-либо сомнения, или если вы неудовлетворены действиями этих третьих сторон в отношении PII, лучше всего отключить весь обмен информацией с этими третьими лицами.

В целях прозрачности тип информации, совместно используемой, и с кем, описан ниже.

##### 11.2.0 ПОИСК ИМЯ ХОСТА

Если вы используете какие-либо функции или модули, предназначенные для работы с именами хостов (например, "модуль блокатор для плохие хосты", "tor project exit nodes block module", или "проверка поисковой системы"), CIDRAM должен иметь возможность получить имя хоста входящих запросов. Как правило, он делает это, запрашивая имя хоста IP-адреса входящих запросов с DNS-сервера, или путем запроса информации через функциональные возможности, предоставляемые системой, где установлен CIDRAM (это обычно называют «поиском имени хоста»). DNS-серверы, определенные по умолчанию, принадлежат службе [Google DNS](https://dns.google.com/) (но это можно легко изменить с помощью конфигурации). Точные услуги, которые связаны с, зависят от конфигурации (это можно легко отрегулировать). В случае использования функциональных возможностей, предоставляемых системой, где установлен CIDRAM, вам необходимо обратиться к системному администратору, чтобы определить, какие поисковые запросы маршрутов используются. Поиск имени хоста можно предотвратить в CIDRAM, избегая затронутых модулей, или изменяя конфигурацию пакета в соответствии с вашими потребностями.

*Соответствующие директивы конфигурации:*
- `general` -> `default_dns`
- `general` -> `search_engine_verification`
- `general` -> `social_media_verification`
- `general` -> `force_hostname_lookup`
- `general` -> `allow_gethostbyaddr_lookup`

##### 11.2.1 ВЕБ ФОНТЫ

Некоторые пользовательские темы, а также стандартный «UI» (пользовательский интерфейс) для фронтенд CIDRAM и страница «Доступ Закрыт» могут использовать веб фонты по эстетическим соображениям. Веб фонты отключен по умолчанию, но когда он включен, происходит прямая связь между браузером пользователя и сервисом, на котором размещаются веб-сайты. Это может потенциально включать в себя передачу информации, такой как IP-адрес пользователя, пользовательский агент, операционная система и другие данные, доступные для запроса. Большинство этих веб фонтов размещены службой [Google Fonts](https://fonts.google.com/).

*Соответствующие директивы конфигурации:*
- `general` -> `disable_webfonts`

##### 11.2.2 ПРОВЕРКА ПОИСКОВЫХ СИСТЕМ И СОЦИАЛЬНЫХ СЕТЕЙ

Когда проверка поисковых систем включена, CIDRAM пытается выполнить «переадресацию DNS-запросов», чтобы проверить, являются ли запросы, утверждающие, что они происходят из поисковых систем, являются подлинными. По аналогии, когда включена проверка социальных сетей, CIDRAM делает то же самое для кажущихся запросов социальных сетях. Для этого он использует службу [Google DNS](https://dns.google.com/) для попытки разрешить IP-адреса из имен хостов этих входящих запросов (в этом процессе имена хостов этих запросов совместно используются службой).

*Соответствующие директивы конфигурации:*
- `general` -> `search_engine_verification`
- `general` -> `social_media_verification`

##### 11.2.3 GOOGLE reCAPTCHA

CIDRAM дополнительно поддерживает [Google reCAPTCHA](https://www.google.com/recaptcha/), предоставляя пользователям возможность обойти страницу «Доступ Закрыт», заполнив экземпляр reCAPTCHA (дополнительная информация об этой функциональность описана ранее в документации, особенно в разделе конфигурации). Google reCAPTCHA требует наличия ключей API для правильной работы и, таким образом, отключается по умолчанию. Его можно включить, указав необходимые ключи API в конфигурации пакета. Когда это разрешено, происходит прямая связь между браузером пользователя и службой reCAPTCHA. Это может потенциально включать в себя передачу информации, такой как IP-адрес пользователя, пользовательский агент, операционная система, и другие данные, доступные для запроса. IP-адрес пользователя также может быть передан службе reCAPTCHA при проверке действительности экземпляра reCAPTCHA и проверке успешного завершения.

*Соответствующие директивы конфигурации: Все, что указано в категории конфигурации «recaptcha».*

##### 11.2.4 STOP FORUM SPAM

[Stop Forum Spam](https://www.stopforumspam.com/) – Это фантастический бесплатный сервис, который может помочь защитить форумы, блоги и веб-сайты от спамеров. Он делает это, предоставляя базу данных известных спамеров и API, который может быть использован для проверки того, указан ли IP-адрес, имя пользователя или адрес электронной почты в его базе данных.

CIDRAM предоставляет необязательный модуль, который использует этот API для проверки того, принадлежит ли IP-адрес входящих запросов к подозреваемому спамеру. Модуль не установлен по умолчанию, но если вы решите его установить, пользовательские IP-адреса могут использоваться совместно с API-интерфейсом Stop Forum Spam в соответствии с назначенной целью модуля. Когда модуль установлен, CIDRAM связывается с этим API всякий раз, когда входящий запрос запрашивает ресурс, который CIDRAM распознает как тип ресурса, часто предназначенный для спамеров (например, страницы входа, страницы регистрации, страницы проверки электронной почты, формы комментариев и т.д.).

#### 11.3 ЖУРНАЛОВ

Журналов (альтернативно: регистрация, логгинг) – Это важная часть CIDRAM по ряду причин. Может быть трудно диагностировать и разрешать ложные-срабатывания, когда события блока, вызывающие их, не регистрируются. Без регистрируются событий блока может быть трудно точно определить, насколько эффективная CIDRAM в любом конкретном контексте, и может быть трудно определить, где его недостатки могут быть, и какие изменения могут потребоваться для его конфигурации или сигнатуры соответственно, чтобы он продолжал функционировать по назначению. Несмотря на это, регистрация может быть нежелательна для всех пользователей и остается полностью необязательной. В CIDRAM регистрация по умолчанию отключена. Чтобы включить его, CIDRAM должен быть настроен соответствующим образом.

Дополнительно, ли ведение журнала разрешено законом, и в какой степени (например, типы информации, которые могут быть зарегистрированы, как долго, и при каких обстоятельствах), может варьироваться в зависимости от юрисдикции и контекста, в котором реализуется CIDRAM (например, если вы работаете как индивидуальный лицо, корпоративный лицо, если вы работаете на коммерческой или некоммерческой основе). Поэтому это может быть полезно для вас внимательно прочитать этот раздел.

CIDRAM может выполнять несколько типов ведения журнала. Различные типы ведения журнала включают различные типы информации по разным причинам.

##### 11.3.0 БЛОКИРОВАТЬ СОБЫТИЯ

Основной тип ведения журнала, который может выполнять CIDRAM, относится к «блочным событиям». Этот тип ведения журнала относится к тому, когда CIDRAM блокирует запрос, и может предоставляться в трех разных форматах:
- Человекочитаемые лог-файлы.
- Лог-файлы в стиле Apache.
- Сериализованные лог-файлы.

Событие блока, записанное в человекочитаемые лог-файлы, обычно выглядит примерно так (в качестве примера):

```
ИД: 1234
Скрипт Версия: CIDRAM v1.6.0
Дата/Время: Day, dd Mon 20xx hh:ii:ss +0000
IP-адрес: x.x.x.x
Имя хоста: dns.hostname.tld
Количество сигнатурей: 1
Идентификаторы для сигнатурей: x.x.x.x/xx
Почему Заблокированные: Облачный сервис ("Имя Сети", Lxx:Fx, [XX])!
Агент пользователя (User Agent): Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36
Реконструированный URI: http://your-site.tld/index.php
Статус reCAPTCHA: Включается.
```

Это же событие блока, записанное в лог-файл в стиле Apache, будет выглядеть примерно так:

```
x.x.x.x - - [Day, dd Mon 20xx hh:ii:ss +0000] "GET /index.php HTTP/1.1" 200 xxxx "-" "Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36"
```

Зарегистрированное событие блокировки обычно включает следующую информацию:
- Идентификационный номер, ссылающийся на событие блока.
- Версия используемой CIDRAM.
- Дата и время, когда произошло событие блока.
- IP-адрес заблокированного запроса.
- Имя хоста IP-адреса заблокированного запроса (если доступно).
- Количество сигнатурей, вызванных запросом.
- Ссылки на сигнатуры срабатывают.
- Ссылки на причины блочного события и некоторые основные связанные данные об отладке.
- Пользовательский агент заблокированного запроса (как запрашивающий объект идентифицировал себя с запросом).
- Реконструкция идентификатора запрашиваемого ресурса.
- Состояние reCAPTCHA для текущего запроса (при необходимости).

*Директивы конфигурации, отвечающие за этот тип ведения журнала, и для каждого из трех доступных форматов:*
- `general` -> `logfile`
- `general` -> `logfileApache`
- `general` -> `logfileSerialized`

Когда эти директивы остаются пустыми, этот тип ведения журнала останется отключенным.

##### 11.3.1 reCAPTCHA ЖУРНАЛОВ

Этот тип ведения журнала относится конкретно к экземплярам reCAPTCHA и возникает только тогда, когда пользователь пытается завершить экземпляр reCAPTCHA.

Запись журнала reCAPTCHA содержит IP-адрес пользователя, пытающегося выполнить экземпляр reCAPTCHA, дату и время, в которое произошла попытка, и состояние reCAPTCHA. Запись журнала reCAPTCHA обычно выглядит примерно так (в качестве примера):

```
IP-адрес: x.x.x.x - Дата/Время: Day, dd Mon 20xx hh:ii:ss +0000 - Статус reCAPTCHA: Успех!
```

*Директива конфигурации, ответственная за ведение журнала reCAPTCHA:*
- `recaptcha` -> `logfile`

##### 11.3.2 ФРОНТЕНД ЖУРНАЛОВ

Этот тип ведения журнала связан с попытками входа в фронтенд и возникает только тогда, когда пользователь пытается войти в фронтенд (при условии, что фронтенд включен).

Эти записи журнала содержат IP-адрес пользователя, пытающегося войти в систему, дату и время совершения попытки, и результаты попытки (успешно вошел в систему или не смог войти в систему). Обычно они выглядят примерно так (в качестве примера):

```
x.x.x.x - Day, dd Mon 20xx hh:ii:ss +0000 - "admin" - Вошли в систему.
```

*Соответствующие директивы конфигурации:*
- `general` -> `FrontEndLog`

##### 11.3.3 ВРАЩЕНИЕ ЖУРНАЛА

Возможно, вы захотите очистить журналы через определенный промежуток времени или, возможно, потребуется сделать это по закону (то есть, количество времени, которое законно допустимо для вас сохранять журналы, может быть ограничено законом). Вы можете достичь этого, включив маркеры даты/времени в имена ваших файлов журналов в соответствии с настройками вашего пакета (например, `{yyyy}-{mm}-{dd}.log`), и затем разрешить вращение журнала (поворот журнала позволяет выполнять некоторые действия на лог-файлах при превышении указанных пределов).

Например: Если мне было необходимо закончить журналы через 30 дней, я мог бы указать `{dd}.log` в именах моих лог-файлов (`{dd}` представляет дни), установить значение `log_rotation_limit` в 30, и установить значение `log_rotation_action` в `Delete`.

И наоборот, если вам необходимо сохранять журналы в течение длительного периода времени, вы можете либо не использовать поворот журнала вообще, либо вы можете установить значение `log_rotation_action` в `Archive`, чтобы сжать лог-файлы, тем самым уменьшив общий объем занимаемого ими дискового пространства.

*Соответствующие директивы конфигурации:*
- `general` -> `log_rotation_limit`
- `general` -> `log_rotation_action`

##### 11.3.4 УСЕЧЕНИЕ ЖУРНАЛА

Также возможно обрезать отдельные лог-файлы, если они превышают определенный размер, если это то, что вы хотите/нуждаетесь сделать.

*Соответствующие директивы конфигурации:*
- `general` -> `truncate`

##### 11.3.5 ПСЕВДОНИМИЗАЦИЯ IP-АДРЕСА

Во-первых, если вы не знакомы с термином, «псевдонимизация» относится к обработке персональных данных таким образом, что она не может быть идентифицирована ни с каким конкретным объектом данных без дополнительной информации, и при условии, что такая дополнительная информация поддерживается отдельно и подлежит техническим и организационным мерам для обеспечения того, чтобы личные данные не могли быть идентифицированы ни одному физическому лицу.

В некоторых случаях вам может быть юридически требуется анонимизировать или псевдонимизировать любого PII, собранного, обработанного, или сохраненного. Хотя эта концепция существует уже довольно давно, GDPR/DSGVO особенно упоминает и специально поощряет «псевдонимизация».

CIDRAM может псевдонимизировать IP-адреса при входе в журналы, если это то, что вы хотите/нуждаетесь сделать. Когда CIDRAM псевдонимизирует IP-адреса, при входе в журналы, окончательный октет адресов IPv4, и все после второй части адресов IPv6 представлено символом «x» (эффективно округляя адреса IPv4 до начального адреса 24-й подсети, в которую они входят, и адреса IPv6 на начальный адрес 32-й подсети, в которую они входят).

*Заметка: Процесс псевдонимизации IP-адреса в CIDRAM не влияет на функцию отслеживания IP-адресов в CIDRAM. Если это проблема для вас, лучше всего отключить IP-отслеживание. Этого можно добиться, установив `track_mode` на `false` и избегая любых модулей.*

*Соответствующие директивы конфигурации:*
- `signatures` -> `track_mode`
- `legal` -> `pseudonymise_ip_addresses`

##### 11.3.6 ОПУСКАЯ ИНФОРМАЦИЮ ЖУРНАЛА

Если вы хотите сделать еще один шаг, не позволяя полностью регистрировать определенные типы информации, это также можно сделать. CIDRAM предоставляет директивы конфигурации для контроля того, включены ли IP-адреса, имена хостов, и пользовательские агенты в журналы. По умолчанию все три эти точки данных включены в журналы, когда они доступны. Установка любой из этих директив конфигурации на `true` будет пропускать соответствующую информацию из журналов.

*Заметка: Нет никаких оснований для псевдонимизировать IP-адресов при полном исключении их из журналов.*

*Соответствующие директивы конфигурации:*
- `legal` -> `omit_ip`
- `legal` -> `omit_hostname`
- `legal` -> `omit_ua`

##### 11.3.7 СТАТИСТИКА

CIDRAM необязательно может отслеживать статистику, такую как общее количество событий блока или экземпляров reCAPTCHA, которые произошли с определенного момента времени. Эта функция отключена по умолчанию, но можно включить с помощью конфигурации пакета. Эта функция отслеживает только общее количество произошедших событий и не содержит никакой информации о конкретных событиях (и поэтому не следует рассматривать как PII).

*Соответствующие директивы конфигурации:*
- `general` -> `statistics`

##### 11.3.8 ШИФРОВАНИЕ

CIDRAM не шифрует свой кеш или какую-либо информацию журнала. [Шифрование](https://ru.wikipedia.org/wiki/%D0%A8%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5) кеша и журналов могут быть введены в будущем, но в настоящее время нет конкретных планов. Если вы обеспокоены тем, что несанкционированные сторонние лица получают доступ к частям CIDRAM, которые могут содержать PII или конфиденциальную информацию, такую как ее кеш или журналы, я бы рекомендовал, чтобы CIDRAM не был установлен в общедоступном месте (например, установить CIDRAM за пределами стандартного каталога `public_html` или его эквивалента, доступного большинству стандартных веб-серверов) и я рекомендую применять соответствующие ограничительные разрешения для каталога установки (в частности, для каталога «vault»). Если этого недостаточно для решения ваших проблем, настройте CIDRAM таким образом, чтобы типы информации, вызывающие ваши проблемы, не собирались или не регистрировались в первую очередь (например, путем отключения ведения журнала).

#### 11.4 КУКИ

CIDRAM устанавливает файлы [куки](https://ru.wikipedia.org/wiki/Cookie) в двух точках своей кодовой базы. Во-первых, когда пользователь успешно завершает экземпляр reCAPTCHA (and assuming that `lockuser` is set to `true`), CIDRAM устанавливает куки, чтобы иметь возможность запоминать для последующих запросов, что пользователь уже завершил экземпляр reCAPTCHA, так что ему не нужно постоянно запрашивать у пользователя завершение экземпляра reCAPTCHA при последующих запросах. Во-вторых, когда пользователь успешно входит в фронтенд, CIDRAM устанавливает куки, чтобы иметь возможность запоминать пользователя для последующих запросов (то есть, куки используются для аутентификации пользователя в сеансе фронтенд).

В обоих случаях предупреждения куки отображаются на видном месте (если применимо), предупреждающее пользователя о том, что куки будет установлен, если они участвуют в соответствующем действии. Куки не установлены ни в одном другом месте в кодовой базе.

*Заметка: Реализация reCAPTCHA «invisible» API для CIDRAM может быть несовместимой с законами куки в некоторых юрисдикциях, и следует избегать на любых сайтах, на которые распространяются такие законы. Возможно, предпочтительнее использовать «V2» API, или полностью отключить reCAPTCHA.*

*Соответствующие директивы конфигурации:*
- `general` -> `disable_frontend`
- `recaptcha` -> `lockuser`
- `recaptcha` -> `api`

#### 11.5 МАРКЕТИНГ И РЕКЛАМА

CIDRAM не собирает и не обрабатывает какую-либо информацию для маркетинговых или рекламных целей и не продает и не получает прибыль от любой собранной или занесенной в журнал информации. CIDRAM не коммерческим предприятием и не имеет отношения к каким-либо коммерческим интересам, поэтому делать это не имеет смысла. Это имело место с самого начала проекта и по-прежнему имеет место сегодня. Кроме того, делать эти вещи было бы контрпродуктивным для духа и намеченной цели проекта в целом, и до тех пор, пока я продолжаю поддерживать проект, никогда не произойдет.

#### 11.6 ПОЛИТИКА КОНФИДЕНЦИАЛЬНОСТИ

В некоторых случаях вам может быть юридически необходимо четко отображать ссылку на вашу политику конфиденциальности на всех страницах и разделах вашего сайта. Это может быть важно как средство обеспечения того, чтобы пользователи были хорошо информированы о ваших точных правилах конфиденциальности, типах PII, которые вы собираете, и о том, как вы собираетесь их использовать. Чтобы иметь возможность включить такую ссылку на странице CIDRAM «Доступ Закрыт», предоставляется директива конфигурации для указания URL-адреса вашей политики конфиденциальности.

*Заметка: Настоятельно рекомендуется, чтобы страница политики конфиденциальности не была помещена за защитой CIDRAM. Если CIDRAM защищает вашу страницу политики конфиденциальности, а пользователь, заблокированный CIDRAM, нажимает ссылку на вашу политику конфиденциальности, они будут снова заблокированы и не смогут увидеть вашу политику конфиденциальности. В идеале вы должны ссылаться на статическую копию вашей политики конфиденциальности, такую как HTML-страница или текстовый файл, который не защищен CIDRAM.*

*Соответствующие директивы конфигурации:*
- `legal` -> `privacy_policy`

#### 11.7 GDPR/DSGVO

«Общее Регулирование Защиты Данных» – Это регламент Европейского Союза, который вступает в силу с 25 Мая 2018 года. Основная цель регулирования – Дать контроль гражданам и жителям ЕС в отношении их личных данных, и унифицировать регулирование в ЕС относительно конфиденциальности и личных данных.

Регулирование содержит конкретные положения, касающиеся обработки «личной идентифицируемой информации» (ПИИ) любых «субъектов данных», (любое идентифицированное или идентифицируемое физическое лицо) из или в пределах ЕС. Чтобы соответствовать регулированию, «предприятия» (согласно определению, указанным в регулирование), и любые соответствующие системы и процессы должны реализовать «конфиденциальность по дизайну» по умолчанию, должны использовать максимально возможные настройки конфиденциальности, должны обеспечивать необходимые гарантии для любой сохраненной или обработанной информации (включая, но не ограничиваясь, внедрение псевдонимизированный или полную анонимизированный данных), должны четко и недвусмысленно объявлять типы собираемых ими данных, как они обрабатывают его, по каким причинам, как долго они его сохраняют, и делится ли они этими данными с любыми третьими лицами, типами данных, совместно используемыми с третьими лицами, как, почему, и т.д.

Данные не могут быть обработаны, если нет законных оснований для этого, в соответствии с определением правила. Как правило, это означает, что для обработки данных субъекта данных на законной основе, это должно выполняться в соответствии с юридическими обязательствами, или только после того, как явное, хорошо информированное, однозначное согласие было получено от субъекта данных.

Поскольку аспекты регулирования могут развиваться во времени, чтобы избежать распространения устаревшей информации, лучше узнать о регулировании из авторитетного источника, а не просто включать соответствующую информацию в документацию к пакету (которые в конечном итоге могут устареть, поскольку регулирование развивается).

Некоторые рекомендуемые ресурсы для получения дополнительной информации:
- [Новый европейский регламент по защите данных – последствия для российских организаций](https://www.buzko.legal/content-ru/general-data-protection-regulation)
- [GDPR — новые правила обработки персональных данных в Европе для международного IT-рынка](https://habr.com/company/digitalrightscenter/blog/344064/)
- [Общий регламент по защите данных](https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D1%89%D0%B8%D0%B9_%D1%80%D0%B5%D0%B3%D0%BB%D0%B0%D0%BC%D0%B5%D0%BD%D1%82_%D0%BF%D0%BE_%D0%B7%D0%B0%D1%89%D0%B8%D1%82%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85)
- [REGULATION (EU) 2016/679 OF THE EUROPEAN PARLIAMENT AND OF THE COUNCIL](https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=celex:32016R0679)

---


Последнее обновление: 26 Сентябрь 2018 (2018.09.26).
